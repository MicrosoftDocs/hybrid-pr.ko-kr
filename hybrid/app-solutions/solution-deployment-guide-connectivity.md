---
title: Azure 및 Azure Stack Hub에서 하이브리드 클라우드 연결 구성
description: Azure 및 Azure Stack Hub를 사용하여 하이브리드 클라우드 연결을 구성하는 방법을 알아봅니다.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 16c5d7820e8c865a9f88cb00da5cc7c854379414
ms.sourcegitcommit: d2def847937178f68177507be151df2aa8e25d53
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/20/2020
ms.locfileid: "86477289"
---
# <a name="configure-hybrid-cloud-connectivity-using-azure-and-azure-stack-hub"></a><span data-ttu-id="b3ccc-103">Azure 및 Azure Stack Hub를 사용하여 하이브리드 클라우드 연결 구성</span><span class="sxs-lookup"><span data-stu-id="b3ccc-103">Configure hybrid cloud connectivity using Azure and Azure Stack Hub</span></span>

<span data-ttu-id="b3ccc-104">하이브리드 연결 패턴을 사용하면 글로벌 Azure 및 Azure Stack Hub에서 보안을 통해 리소스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-104">You can access resources with security in global Azure and Azure Stack Hub using the hybrid connectivity pattern.</span></span>

<span data-ttu-id="b3ccc-105">이 솔루션에서는 다음을 수행하는 샘플 환경을 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-105">In this solution, you'll build a sample environment to:</span></span>

> [!div class="checklist"]
> - <span data-ttu-id="b3ccc-106">개인 정보 보호 또는 규정 요구 사항을 충족하기 위해 온-프레미스에 데이터를 유지하지만 글로벌 Azure 리소스에 대한 액세스는 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-106">Keep data on-premises to meet privacy or regulatory requirements but keep access to global Azure resources.</span></span>
> - <span data-ttu-id="b3ccc-107">글로벌 Azure에서 클라우드 규모의 앱 배포 및 리소스를 사용하면서 레거시 시스템을 유지 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-107">Maintain a legacy system while using cloud-scaled app deployment and resources in global Azure.</span></span>

> [!Tip]  
> <span data-ttu-id="b3ccc-108">![hybrid-pillars.png](./media/solution-deployment-guide-cross-cloud-scaling/hybrid-pillars.png)</span><span class="sxs-lookup"><span data-stu-id="b3ccc-108">![hybrid-pillars.png](./media/solution-deployment-guide-cross-cloud-scaling/hybrid-pillars.png)</span></span>  
> <span data-ttu-id="b3ccc-109">Microsoft Azure Stack Hub는 Azure의 확장입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-109">Microsoft Azure Stack Hub is an extension of Azure.</span></span> <span data-ttu-id="b3ccc-110">Azure Stack Hub는 온-프레미스 환경에 클라우드 컴퓨팅의 민첩성과 혁신을 제공하여 어디서나 하이브리드 앱을 빌드하고 배포할 수 있는 유일한 하이브리드 클라우드를 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-110">Azure Stack Hub brings the agility and innovation of cloud computing to your on-premises environment, enabling the only hybrid cloud that allows you to build and deploy hybrid apps anywhere.</span></span>  
> 
> <span data-ttu-id="b3ccc-111">[하이브리드 앱 디자인 고려 사항](overview-app-design-considerations.md) 문서는 하이브리드 앱 디자인, 배포 및 운영에 대한 소프트웨어 품질(배치, 확장성, 가용성, 복원력, 관리 효율성 및 보안)의 핵심 요소를 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-111">The article [Hybrid app design considerations](overview-app-design-considerations.md) reviews pillars of software quality (placement, scalability, availability, resiliency, manageability, and security) for designing, deploying, and operating hybrid apps.</span></span> <span data-ttu-id="b3ccc-112">디자인 고려 사항은 하이브리드 앱 디자인을 최적화하고 프로덕션 환경에서 문제를 최소화하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-112">The design considerations assist in optimizing hybrid app design, minimizing challenges in production environments.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b3ccc-113">필수 구성 요소</span><span class="sxs-lookup"><span data-stu-id="b3ccc-113">Prerequisites</span></span>

<span data-ttu-id="b3ccc-114">하이브리드 연결 배포를 빌드하려면 몇 가지 구성 요소가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-114">A few components are required to build a hybrid connectivity deployment.</span></span> <span data-ttu-id="b3ccc-115">이러한 구성 요소 중 일부는 준비하는 데 시간이 걸리므로 적절하게 계획하세요.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-115">Some of these components take time to prepare, so plan accordingly.</span></span>

### <a name="azure"></a><span data-ttu-id="b3ccc-116">Azure</span><span class="sxs-lookup"><span data-stu-id="b3ccc-116">Azure</span></span>

- <span data-ttu-id="b3ccc-117">Azure 구독이 아직 없는 경우 시작하기 전에 [체험 계정](https://azure.microsoft.com/free/?WT.mc_id=A261C142F)을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-117">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
- <span data-ttu-id="b3ccc-118">Azure에서 [웹앱](/vsts/build-release/apps/cd/azure/aspnet-core-to-azure-webapp?tabs=vsts&view=vsts)을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-118">Create a [web app](/vsts/build-release/apps/cd/azure/aspnet-core-to-azure-webapp?tabs=vsts&view=vsts) in Azure.</span></span> <span data-ttu-id="b3ccc-119">웹앱 URL은 적어두세요. 솔루션에서 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-119">Make note of the web app URL because you'll need it in the solution.</span></span>

### <a name="azure-stack-hub"></a><span data-ttu-id="b3ccc-120">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="b3ccc-120">Azure Stack Hub</span></span>

<span data-ttu-id="b3ccc-121">Azure OEM/하드웨어 파트너는 프로덕션 Azure Stack Hub를 배포할 수 있으며, 모든 사용자는 ASDK(Azure Stack Development Kit)를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-121">An Azure OEM/hardware partner can deploy a production Azure Stack Hub, and all users can deploy an Azure Stack Development Kit (ASDK).</span></span>

- <span data-ttu-id="b3ccc-122">프로덕션 Azure Stack Hub를 사용하거나 ASDK를 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-122">Use your production Azure Stack Hub or deploy the ASDK.</span></span>
   >[!Note]
   ><span data-ttu-id="b3ccc-123">ASDK 배포에는 최대 7시간이 걸릴 수 있으므로 적절하게 계획하세요.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-123">Deploying the ASDK can take up to 7 hours, so plan accordingly.</span></span>

- <span data-ttu-id="b3ccc-124">[App Service](/azure-stack/operator/azure-stack-app-service-deploy.md) PaaS 서비스를 Azure Stack 허브에 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-124">Deploy [App Service](/azure-stack/operator/azure-stack-app-service-deploy.md) PaaS services to Azure Stack Hub.</span></span>
- <span data-ttu-id="b3ccc-125">Azure Stack Hub 환경에서 [계획 및 제안을 만듭니다](/azure-stack/operator/service-plan-offer-subscription-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b3ccc-125">[Create plans and offers](/azure-stack/operator/service-plan-offer-subscription-overview.md) in the Azure Stack Hub environment.</span></span>
- <span data-ttu-id="b3ccc-126">Azure Stack Hub 환경 내에 [테넌트 구독을 만듭니다](/azure-stack/operator/azure-stack-subscribe-plan-provision-vm.md).</span><span class="sxs-lookup"><span data-stu-id="b3ccc-126">[Create tenant subscription](/azure-stack/operator/azure-stack-subscribe-plan-provision-vm.md) within the Azure Stack Hub environment.</span></span>

### <a name="azure-stack-hub-components"></a><span data-ttu-id="b3ccc-127">Azure Stack Hub 구성 요소</span><span class="sxs-lookup"><span data-stu-id="b3ccc-127">Azure Stack Hub components</span></span>

<span data-ttu-id="b3ccc-128">Azure Stack Hub 운영자는 App Service를 배포하고 계획 및 제안을 만든 다음, 테넌트 구독을 만들고 Windows Server 2016 이미지를 추가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-128">An Azure Stack Hub operator must deploy the App Service, create plans and offers, create a tenant subscription, and add the Windows Server 2016 image.</span></span> <span data-ttu-id="b3ccc-129">이러한 구성 요소가 이미 있는 경우 이 솔루션을 시작하기 전에 해당 구성 요소가 요구 사항을 충족하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-129">If you already have these components, make sure they meet the requirements before you start this  solution.</span></span>

<span data-ttu-id="b3ccc-130">이 솔루션 예제에서는 Azure 및 Azure Stack Hub에 대한 기본적인 지식이 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-130">This solution example assumes that you have some basic knowledge of Azure and Azure Stack Hub.</span></span> <span data-ttu-id="b3ccc-131">솔루션을 시작하기 전에 자세히 알아보려면 다음 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-131">To learn more before starting the solution, read the following articles:</span></span>

- [<span data-ttu-id="b3ccc-132">Azure 소개</span><span class="sxs-lookup"><span data-stu-id="b3ccc-132">Introduction to Azure</span></span>](https://azure.microsoft.com/overview/what-is-azure/)
- [<span data-ttu-id="b3ccc-133">Azure Stack Hub 주요 개념</span><span class="sxs-lookup"><span data-stu-id="b3ccc-133">Azure Stack Hub Key Concepts</span></span>](/azure-stack/operator/azure-stack-overview.md)

### <a name="before-you-begin"></a><span data-ttu-id="b3ccc-134">시작하기 전에</span><span class="sxs-lookup"><span data-stu-id="b3ccc-134">Before you begin</span></span>

<span data-ttu-id="b3ccc-135">하이브리드 클라우드 연결 구성을 시작하기 전에 다음 기준을 충족하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-135">Verify that you meet the following criteria before you start configuring hybrid cloud connectivity:</span></span>

- <span data-ttu-id="b3ccc-136">VPN 디바이스에 대한 외부 연결 공용 IPv4 주소가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-136">You need an externally facing public IPv4 address for your VPN device.</span></span> <span data-ttu-id="b3ccc-137">이 IP 주소는 NAT(Network Address Translation) 뒤에 있을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-137">This IP address can't be located behind a NAT (Network Address Translation).</span></span>
- <span data-ttu-id="b3ccc-138">모든 리소스는 동일한 지역/위치에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-138">All resources are deployed in the same region/location.</span></span>

#### <a name="solution-example-values"></a><span data-ttu-id="b3ccc-139">솔루션 예제 값</span><span class="sxs-lookup"><span data-stu-id="b3ccc-139">Solution example values</span></span>

<span data-ttu-id="b3ccc-140">이 솔루션의 예제에서는 다음 값을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-140">The examples in this solution use the following values.</span></span> <span data-ttu-id="b3ccc-141">이러한 값을 사용하여 테스트 환경을 만들거나 이 값을 참조하여 예제를 보다 정확하게 이해할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-141">You can use these values to create a test environment or refer to them for a better understanding of the examples.</span></span> <span data-ttu-id="b3ccc-142">VPN 게이트웨이 설정에 대한 자세한 내용은 [VPN Gateway 설정 정보](/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-142">For more information about VPN gateway settings, see [About VPN Gateway Settings](/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings).</span></span>

<span data-ttu-id="b3ccc-143">연결 사양:</span><span class="sxs-lookup"><span data-stu-id="b3ccc-143">Connection specifications:</span></span>

- <span data-ttu-id="b3ccc-144">**VPN 유형**: 경로 기반</span><span class="sxs-lookup"><span data-stu-id="b3ccc-144">**VPN type**: route-based</span></span>
- <span data-ttu-id="b3ccc-145">**연결 형식:** 사이트 간(IPsec)</span><span class="sxs-lookup"><span data-stu-id="b3ccc-145">**Connection type**: site-to-site (IPsec)</span></span>
- <span data-ttu-id="b3ccc-146">**게이트웨이 유형**: VPN</span><span class="sxs-lookup"><span data-stu-id="b3ccc-146">**Gateway type**: VPN</span></span>
- <span data-ttu-id="b3ccc-147">**Azure 연결 이름**: Azure-Gateway-AzureStack-S2SGateway(포털에서 이 값이 자동으로 채워짐)</span><span class="sxs-lookup"><span data-stu-id="b3ccc-147">**Azure connection name**: Azure-Gateway-AzureStack-S2SGateway (the portal will autofill this value)</span></span>
- <span data-ttu-id="b3ccc-148">**Azure Stack Hub 연결 이름**: AzureStack-Gateway-Azure-S2SGateway(포털에서 이 값이 자동으로 채워짐)</span><span class="sxs-lookup"><span data-stu-id="b3ccc-148">**Azure Stack Hub connection name**: AzureStack-Gateway-Azure-S2SGateway (the portal will autofill this value)</span></span>
- <span data-ttu-id="b3ccc-149">**공유 키**: 연결의 양쪽에서 일치하는 값을 사용하는 VPN 하드웨어와 호환 가능</span><span class="sxs-lookup"><span data-stu-id="b3ccc-149">**Shared key**: any compatible with VPN hardware, with matching values on both sides of connection</span></span>
- <span data-ttu-id="b3ccc-150">**구독**: 선호하는 구독</span><span class="sxs-lookup"><span data-stu-id="b3ccc-150">**Subscription**: any preferred subscription</span></span>
- <span data-ttu-id="b3ccc-151">**리소스 그룹**: Test-Infra</span><span class="sxs-lookup"><span data-stu-id="b3ccc-151">**Resource group**: Test-Infra</span></span>

<span data-ttu-id="b3ccc-152">네트워크 및 서브넷 IP 주소:</span><span class="sxs-lookup"><span data-stu-id="b3ccc-152">Network and subnet IP addresses:</span></span>

| <span data-ttu-id="b3ccc-153">Azure/Azure Stack Hub 연결</span><span class="sxs-lookup"><span data-stu-id="b3ccc-153">Azure/Azure Stack Hub Connection</span></span> | <span data-ttu-id="b3ccc-154">Name</span><span class="sxs-lookup"><span data-stu-id="b3ccc-154">Name</span></span> | <span data-ttu-id="b3ccc-155">서브넷</span><span class="sxs-lookup"><span data-stu-id="b3ccc-155">Subnet</span></span> | <span data-ttu-id="b3ccc-156">IP 주소</span><span class="sxs-lookup"><span data-stu-id="b3ccc-156">IP Address</span></span> |
|---|---|---|---|
| <span data-ttu-id="b3ccc-157">Azure vNet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-157">Azure vNet</span></span> | <span data-ttu-id="b3ccc-158">ApplicationvNet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-158">ApplicationvNet</span></span><br><span data-ttu-id="b3ccc-159">10.100.102.9/23</span><span class="sxs-lookup"><span data-stu-id="b3ccc-159">10.100.102.9/23</span></span> | <span data-ttu-id="b3ccc-160">ApplicationSubnet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-160">ApplicationSubnet</span></span><br><span data-ttu-id="b3ccc-161">10.100.102.0/24</span><span class="sxs-lookup"><span data-stu-id="b3ccc-161">10.100.102.0/24</span></span> |  |
|  |  | <span data-ttu-id="b3ccc-162">GatewaySubnet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-162">GatewaySubnet</span></span><br><span data-ttu-id="b3ccc-163">10.100.103.0/24</span><span class="sxs-lookup"><span data-stu-id="b3ccc-163">10.100.103.0/24</span></span> |  |
| <span data-ttu-id="b3ccc-164">Azure Stack Hub vNet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-164">Azure Stack Hub vNet</span></span> | <span data-ttu-id="b3ccc-165">ApplicationvNet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-165">ApplicationvNet</span></span><br><span data-ttu-id="b3ccc-166">10.100.100.0/23</span><span class="sxs-lookup"><span data-stu-id="b3ccc-166">10.100.100.0/23</span></span> | <span data-ttu-id="b3ccc-167">ApplicationSubnet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-167">ApplicationSubnet</span></span> <br><span data-ttu-id="b3ccc-168">10.100.100.0/24</span><span class="sxs-lookup"><span data-stu-id="b3ccc-168">10.100.100.0/24</span></span> |  |
|  |  | <span data-ttu-id="b3ccc-169">GatewaySubnet</span><span class="sxs-lookup"><span data-stu-id="b3ccc-169">GatewaySubnet</span></span> <br><span data-ttu-id="b3ccc-170">10.100101.0/24</span><span class="sxs-lookup"><span data-stu-id="b3ccc-170">10.100101.0/24</span></span> |  |
| <span data-ttu-id="b3ccc-171">Azure Virtual Network 게이트웨이</span><span class="sxs-lookup"><span data-stu-id="b3ccc-171">Azure Virtual Network Gateway</span></span> | <span data-ttu-id="b3ccc-172">Azure-Gateway</span><span class="sxs-lookup"><span data-stu-id="b3ccc-172">Azure-Gateway</span></span> |  |  |
| <span data-ttu-id="b3ccc-173">Azure Stack Hub Virtual Network 게이트웨이</span><span class="sxs-lookup"><span data-stu-id="b3ccc-173">Azure Stack Hub Virtual Network Gateway</span></span> | <span data-ttu-id="b3ccc-174">AzureStack-Gateway</span><span class="sxs-lookup"><span data-stu-id="b3ccc-174">AzureStack-Gateway</span></span> |  |  |
| <span data-ttu-id="b3ccc-175">Azure 공용 IP</span><span class="sxs-lookup"><span data-stu-id="b3ccc-175">Azure Public IP</span></span> | <span data-ttu-id="b3ccc-176">Azure-GatewayPublicIP</span><span class="sxs-lookup"><span data-stu-id="b3ccc-176">Azure-GatewayPublicIP</span></span> |  | <span data-ttu-id="b3ccc-177">생성 시 결정됨</span><span class="sxs-lookup"><span data-stu-id="b3ccc-177">Determined at creation</span></span> |
| <span data-ttu-id="b3ccc-178">Azure Stack Hub 공용 IP</span><span class="sxs-lookup"><span data-stu-id="b3ccc-178">Azure Stack Hub Public IP</span></span> | <span data-ttu-id="b3ccc-179">AzureStack-GatewayPublicIP</span><span class="sxs-lookup"><span data-stu-id="b3ccc-179">AzureStack-GatewayPublicIP</span></span> |  | <span data-ttu-id="b3ccc-180">생성 시 결정됨</span><span class="sxs-lookup"><span data-stu-id="b3ccc-180">Determined at creation</span></span> |
| <span data-ttu-id="b3ccc-181">Azure 로컬 네트워크 게이트웨이</span><span class="sxs-lookup"><span data-stu-id="b3ccc-181">Azure Local Network Gateway</span></span> | <span data-ttu-id="b3ccc-182">AzureStack-S2SGateway</span><span class="sxs-lookup"><span data-stu-id="b3ccc-182">AzureStack-S2SGateway</span></span><br>   <span data-ttu-id="b3ccc-183">10.100.100.0/23</span><span class="sxs-lookup"><span data-stu-id="b3ccc-183">10.100.100.0/23</span></span> |  | <span data-ttu-id="b3ccc-184">Azure Stack Hub 공용 IP 값</span><span class="sxs-lookup"><span data-stu-id="b3ccc-184">Azure Stack Hub Public IP Value</span></span> |
| <span data-ttu-id="b3ccc-185">Azure Stack Hub 로컬 네트워크 게이트웨이</span><span class="sxs-lookup"><span data-stu-id="b3ccc-185">Azure Stack Hub Local Network Gateway</span></span> | <span data-ttu-id="b3ccc-186">Azure-S2SGateway</span><span class="sxs-lookup"><span data-stu-id="b3ccc-186">Azure-S2SGateway</span></span><br><span data-ttu-id="b3ccc-187">10.100.102.0/23</span><span class="sxs-lookup"><span data-stu-id="b3ccc-187">10.100.102.0/23</span></span> |  | <span data-ttu-id="b3ccc-188">Azure 공용 IP 값</span><span class="sxs-lookup"><span data-stu-id="b3ccc-188">Azure Public IP Value</span></span> |

## <a name="create-a-virtual-network-in-global-azure-and-azure-stack-hub"></a><span data-ttu-id="b3ccc-189">글로벌 Azure 및 Azure Stack Hub에서 가상 네트워크 만들기</span><span class="sxs-lookup"><span data-stu-id="b3ccc-189">Create a virtual network in global Azure and Azure Stack Hub</span></span>

<span data-ttu-id="b3ccc-190">다음 단계를 사용하여 포털에서 가상 네트워크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-190">Use the following steps to create a virtual network by using the portal.</span></span> <span data-ttu-id="b3ccc-191">이 문서를 솔루션으로만 사용하는 경우 [예제 값](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal#values)을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-191">You can use these [example values](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal#values) if you're using this article as only a  solution.</span></span> <span data-ttu-id="b3ccc-192">이 문서를 사용하여 프로덕션 환경을 구성하는 경우에는 예제 설정을 자체 값으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-192">If you're using this article to configure a production environment, replace the example settings with  your own values.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b3ccc-193">Azure 또는 Azure Stack Hub vNet 주소 공간에 IP 주소가 겹치지 않도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-193">You must ensure that there isn't an overlap of IP addresses in Azure or Azure Stack Hub vNet address spaces.</span></span>

<span data-ttu-id="b3ccc-194">Azure에서 vNet을 만들려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-194">To create a vNet in Azure:</span></span>

1. <span data-ttu-id="b3ccc-195">브라우저를 사용하여 [Azure Portal](https://portal.azure.com/)에 연결하고 Azure 계정을 사용하여 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-195">Use your browser to connect to the [Azure portal](https://portal.azure.com/) and sign in with your Azure account.</span></span>
2. <span data-ttu-id="b3ccc-196">**리소스 만들기**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-196">Select **Create a resource**.</span></span> <span data-ttu-id="b3ccc-197">**마켓플레이스 검색** 필드에 ‘virtual network’를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-197">In the **Search the marketplace** field, enter 'virtual network'.</span></span> <span data-ttu-id="b3ccc-198">결과에서 **Virtual network**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-198">Select **Virtual network** from the results.</span></span>
3. <span data-ttu-id="b3ccc-199">**배포 모델 선택** 목록에서 **Resource Manager**를 선택한 다음, **만들기**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-199">From the **Select a deployment model** list, select **Resource Manager**, and then select **Create**.</span></span>
4. <span data-ttu-id="b3ccc-200">**가상 네트워크 만들기**에서 VNet 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-200">On **Create virtual network**, configure the VNet settings.</span></span> <span data-ttu-id="b3ccc-201">필수 필드 이름 앞에는 빨간색 별표가 붙습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-201">The required fields names are prefixed with a red asterisk.</span></span>  <span data-ttu-id="b3ccc-202">유효한 값을 입력하면 별표가 녹색 확인 표시로 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-202">When you enter a valid value, the asterisk changes to a green check mark.</span></span>

<span data-ttu-id="b3ccc-203">Azure Stack Hub에서 vNet을 만들려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-203">To create a vNet in Azure Stack Hub:</span></span>

1. <span data-ttu-id="b3ccc-204">Azure Stack Hub **테넌트 포털**을 사용하여 위의(1-4) 단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-204">Repeat the steps above (1-4) using the Azure Stack Hub **tenant portal**.</span></span>

## <a name="add-a-gateway-subnet"></a><span data-ttu-id="b3ccc-205">게이트웨이 서브넷 추가</span><span class="sxs-lookup"><span data-stu-id="b3ccc-205">Add a gateway subnet</span></span>

<span data-ttu-id="b3ccc-206">가상 네트워크를 게이트웨이에 연결하기 전에 먼저 연결하려는 가상 네트워크에 대한 게이트웨이 서브넷을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-206">Before connecting your virtual network to a gateway, you need to create the gateway subnet for the virtual network that you want to connect to.</span></span> <span data-ttu-id="b3ccc-207">게이트웨이 서비스는 게이트웨이 서브넷에 지정한 IP 주소를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-207">The gateway services use the IP addresses you specify in the gateway subnet.</span></span>

<span data-ttu-id="b3ccc-208">[Azure Portal](https://portal.azure.com/)에서 가상 네트워크 게이트웨이를 만들려는 Resource Manager 가상 네트워크로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-208">In the [Azure portal](https://portal.azure.com/), navigate to the Resource Manager virtual network where you want to create a virtual network gateway.</span></span>

1. <span data-ttu-id="b3ccc-209">vNet을 선택하여 **가상 네트워크** 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-209">Select the vNet to open the **Virtual network** page.</span></span>
2. <span data-ttu-id="b3ccc-210">**설정**에서 **서브넷**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-210">In **SETTINGS**, select **Subnets**.</span></span>
3. <span data-ttu-id="b3ccc-211">**서브넷** 페이지에서 **+게이트웨이 서브넷**을 선택하여 **서브넷 추가** 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-211">On the **Subnets** page, select **+Gateway subnet** to open the **Add subnet** page.</span></span>

    ![게이트웨이 서브넷 추가](media/solution-deployment-guide-connectivity/image4.png)

4. <span data-ttu-id="b3ccc-213">서브넷의 **이름**에 'GatewaySubnet' 값이 자동으로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-213">The **Name** for the subnet is automatically filled in with the value 'GatewaySubnet'.</span></span> <span data-ttu-id="b3ccc-214">Azure가 서브넷을 게이트웨이 서브넷으로 인식하기 위해 이 값이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-214">This value is required for Azure to recognize the subnet as the gateway subnet.</span></span>
5. <span data-ttu-id="b3ccc-215">구성 요구 사항과 일치하도록 제공된 **주소 범위** 값을 변경한 다음, **확인**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-215">Change the **Address range** values that are provided to match your configuration requirements and then select **OK**.</span></span>

## <a name="create-a-virtual-network-gateway-in-azure-and-azure-stack"></a><span data-ttu-id="b3ccc-216">Azure 및 Azure Stack에서 가상 네트워크 게이트웨이 만들기</span><span class="sxs-lookup"><span data-stu-id="b3ccc-216">Create a Virtual Network Gateway in Azure and Azure Stack</span></span>

<span data-ttu-id="b3ccc-217">다음 단계를 사용하여 Azure에서 가상 네트워크 게이트웨이를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-217">Use the following steps to create a virtual network gateway in Azure.</span></span>

1. <span data-ttu-id="b3ccc-218">포털 페이지의 왼쪽에서 **+** 를 선택하고 검색 필드에 '가상 네트워크 게이트웨이'를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-218">On the left side of the portal page, select **+** and enter 'virtual network gateway' in the search field.</span></span>
2. <span data-ttu-id="b3ccc-219">**결과**에서 **가상 네트워크 게이트웨이**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-219">In **Results**, select **Virtual network gateway**.</span></span>
3. <span data-ttu-id="b3ccc-220">**가상 네트워크 게이트웨이**에서 **만들기**를 선택하여 **가상 네트워크 게이트웨이 만들기** 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-220">In **Virtual network gateway**, select **Create** to open the **Create virtual network gateway** page.</span></span>
4. <span data-ttu-id="b3ccc-221">**가상 네트워크 게이트웨이 만들기**에서 **자습서 예제 값**을 사용하여 네트워크 게이트웨이의 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-221">On **Create virtual network gateway**, specify the values for your network gateway using our **Tutorial example values**.</span></span> <span data-ttu-id="b3ccc-222">다음과 같은 추가 값을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-222">Include the following additional values:</span></span>

   - <span data-ttu-id="b3ccc-223">**SKU**: 기본</span><span class="sxs-lookup"><span data-stu-id="b3ccc-223">**SKU**: basic</span></span>
   - <span data-ttu-id="b3ccc-224">**Virtual Network**: 이전에 만든 가상 네트워크를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-224">**Virtual Network**: Select the virtual network you created earlier.</span></span> <span data-ttu-id="b3ccc-225">만든 게이트웨이 서브넷이 자동으로 선택됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-225">The gateway subnet you created is automatically selected.</span></span>
   - <span data-ttu-id="b3ccc-226">**첫 IP 구성**:  게이트웨이의 공용 IP입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-226">**First IP Configuration**:  The public IP of your gateway.</span></span>
     - <span data-ttu-id="b3ccc-227">**게이트웨이 IP 구성 생성**을 선택하면 **공용 IP 주소 선택** 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-227">Select **Create gateway IP configuration**, which takes you to the **Choose public IP address** page.</span></span>
     - <span data-ttu-id="b3ccc-228">**+새로 만들기**를 선택하여 **공용 IP 주소 만들기** 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-228">Select **+Create new** to open the **Create public IP address** page.</span></span>
     - <span data-ttu-id="b3ccc-229">공용 IP 주소의 **이름**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-229">Enter a **Name** for your public IP address.</span></span> <span data-ttu-id="b3ccc-230">SKU를 **기본**으로 유지한 다음, **확인**을 선택하여 변경 내용을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-230">Leave the SKU as **Basic**, and then select **OK** to save your changes.</span></span>

       > [!Note]
       > <span data-ttu-id="b3ccc-231">현재 VPN Gateway는 동적 공용 IP 주소 할당만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-231">Currently, VPN Gateway only supports Dynamic Public IP address allocation.</span></span> <span data-ttu-id="b3ccc-232">하지만 IP 주소가 VPN 게이트웨이에 할당된 후에 변경되는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-232">However, this doesn't mean that the IP address changes after it's assigned to your VPN gateway.</span></span> <span data-ttu-id="b3ccc-233">게이트웨이를 삭제하고 다시 만드는 경우에만 공용 IP 주소가 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-233">The only time the public IP address changes is when the gateway is deleted and re-created.</span></span> <span data-ttu-id="b3ccc-234">VPN 게이트웨이에 대해 크기 조정, 재설정 또는 기타 내부 유지 관리/업그레이드를 수행해도 IP 주소는 변경되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-234">Resizing, resetting, or other internal maintenance/upgrades to your VPN gateway don't change the IP address.</span></span>

5. <span data-ttu-id="b3ccc-235">게이트웨이 설정을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-235">Verify your gateway settings.</span></span>
6. <span data-ttu-id="b3ccc-236">**만들기**를 선택하여 VPN 게이트웨이를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-236">Select **Create** to create the VPN gateway.</span></span> <span data-ttu-id="b3ccc-237">게이트웨이 설정의 유효성이 검사되고 "가상 네트워크 게이트웨이 배포" 타일이 대시보드에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-237">The gateway settings are validated and the "Deploying Virtual network gateway" tile is shown on your dashboard.</span></span>

   >[!Note]
   ><span data-ttu-id="b3ccc-238">하나의 게이트웨이를 만드는 데 최대 45분이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-238">Creating a gateway can take up to 45 minutes.</span></span> <span data-ttu-id="b3ccc-239">완료 상태를 확인하기 위해 포털 페이지를 새로 고쳐야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-239">You may need to refresh your portal page to see the completed status.</span></span>

    <span data-ttu-id="b3ccc-240">게이트웨이가 생성된 후 포털에서 가상 네트워크를 살펴보면 게이트웨이에 할당된 IP 주소를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-240">After the gateway is created, you can see the IP address assigned to it by looking at the virtual network in the portal.</span></span> <span data-ttu-id="b3ccc-241">게이트웨이가 연결된 디바이스로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-241">The gateway appears as a connected device.</span></span> <span data-ttu-id="b3ccc-242">게이트웨이에 대한 자세한 정보를 보려면 디바이스를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-242">To see more information about the gateway, select the device.</span></span>

7. <span data-ttu-id="b3ccc-243">Azure Stack Hub 배포에서 이전 단계(1-5)를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-243">Repeat the previous steps (1-5) on your Azure Stack Hub deployment.</span></span>

## <a name="create-the-local-network-gateway-in-azure-and-azure-stack-hub"></a><span data-ttu-id="b3ccc-244">Azure 및 Azure Stack Hub에서 로컬 네트워크 게이트웨이 만들기</span><span class="sxs-lookup"><span data-stu-id="b3ccc-244">Create the local network gateway in Azure and Azure Stack Hub</span></span>

<span data-ttu-id="b3ccc-245">로컬 네트워크 게이트웨이는 일반적으로 온-프레미스 위치를 가리킵니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-245">The local network gateway typically refers to your on-premises location.</span></span> <span data-ttu-id="b3ccc-246">Azure 또는 Azure Stack 허브가 참조할 수 있는 이름을 사이트에 지정하고 다음을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-246">You give the site a name that Azure or Azure Stack Hub can refer to, and then specify:</span></span>

- <span data-ttu-id="b3ccc-247">연결하려는 온-프레미스 VPN 디바이스의 IP 주소</span><span class="sxs-lookup"><span data-stu-id="b3ccc-247">The IP address of the on-premises VPN device that you're creating a connection for.</span></span>
- <span data-ttu-id="b3ccc-248">VPN 게이트웨이를 통해 VPN 디바이스로 라우팅될 IP 주소 접두사.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-248">The IP address prefixes that will be routed through the VPN gateway to the VPN device.</span></span> <span data-ttu-id="b3ccc-249">사용자가 지정하는 주소 접두사는 온-프레미스 네트워크에 있는 접두사입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-249">The address prefixes you specify are the prefixes located on your on-premises network.</span></span>

  >[!Note]
  ><span data-ttu-id="b3ccc-250">온-프레미스 네트워크가 변경되거나 VPN 디바이스의 공용 IP 주소를 변경해야 하는 경우 나중에 값을 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-250">If your on-premises network changes or you need to change the public IP address for the VPN device, you can update these values later.</span></span>

1. <span data-ttu-id="b3ccc-251">포털에서 **+리소스 만들기**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-251">In the portal, select **+Create a resource**.</span></span>
2. <span data-ttu-id="b3ccc-252">검색 상자에 **로컬 네트워크 게이트웨이**를 입력한 다음, **Enter**를 선택하여 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-252">In the search box, enter **Local network gateway**, then select **Enter** to search.</span></span> <span data-ttu-id="b3ccc-253">결과 목록이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-253">A list of results will display.</span></span>
3. <span data-ttu-id="b3ccc-254">**로컬 네트워크 게이트웨이**를 선택한 다음, **만들기**를 선택하여 **로컬 네트워크 게이트웨이 만들기** 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-254">Select **Local network gateway**, then select **Create** to open the **Create local network gateway** page.</span></span>
4. <span data-ttu-id="b3ccc-255">**로컬 네트워크 게이트웨이 만들기**에서 **자습서 예제 값**을 사용하여 로컬 네트워크 게이트웨이의 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-255">On **Create local network gateway**, specify the values for your local network gateway using our **Tutorial example values**.</span></span> <span data-ttu-id="b3ccc-256">다음과 같은 추가 값을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-256">Include the following additional values:</span></span>

    - <span data-ttu-id="b3ccc-257">**IP 주소**: Azure 또는 Azure Stack Hub에 연결하려는 VPN 디바이스의 공용 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-257">**IP address**: The public IP address of the VPN device that you want Azure or Azure Stack Hub to connect to.</span></span> <span data-ttu-id="b3ccc-258">NAT 뒤에 있지 않은 유효한 공용 IP 주소를 지정합니다. 그래야 Azure가 해당 주소에 도달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-258">Specify a valid public IP address that isn't behind a NAT so Azure can reach the address.</span></span> <span data-ttu-id="b3ccc-259">지금 IP 주소가 없으면 예제의 값을 자리 표시자로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-259">If you don't have the IP address right now, you can use a value from the example as a placeholder.</span></span> <span data-ttu-id="b3ccc-260">뒤로 돌아가서 자리 표시자를 VPN 디바이스의 공용 IP 주소로 바꿔야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-260">You'll have to go back and replace the placeholder with the public IP address of your VPN device.</span></span> <span data-ttu-id="b3ccc-261">유효한 주소를 제공할 때까지는 Azure를 디바이스에 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-261">Azure can't connect to the device until you provide a valid address.</span></span>
    - <span data-ttu-id="b3ccc-262">**주소 공간**: 이 로컬 네트워크가 나타내는 네트워크의 주소 범위입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-262">**Address Space**: the address range for the network that this local network represents.</span></span> <span data-ttu-id="b3ccc-263">주소 공간 범위를 여러 개 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-263">You can add multiple address space ranges.</span></span> <span data-ttu-id="b3ccc-264">지정한 범위가 연결하려는 다른 네트워크의 범위와 겹치지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-264">Make sure that the ranges you specify don't overlap with ranges of other networks that you want to connect to.</span></span> <span data-ttu-id="b3ccc-265">Azure는 지정한 주소 범위를 온-프레미스 VPN 디바이스 IP 주소에 라우팅합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-265">Azure will route the address range that you specify to the on-premises VPN device IP address.</span></span> <span data-ttu-id="b3ccc-266">온-프레미스 사이트에 연결하려면 예제 값이 아닌 자체 값을 사용하십시오.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-266">Use your own values if you want to connect to your on-premises site, not an example value.</span></span>
    - <span data-ttu-id="b3ccc-267">**BGP 설정 구성**: BGP를 구성할 경우에만 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-267">**Configure BGP settings**: Use only when configuring BGP.</span></span> <span data-ttu-id="b3ccc-268">그렇지 않으면 이 옵션을 선택하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-268">Otherwise, don't select this option.</span></span>
    - <span data-ttu-id="b3ccc-269">**구독**: 올바른 구독이 표시되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-269">**Subscription**: Verify that the correct subscription is showing.</span></span>
    - <span data-ttu-id="b3ccc-270">**리소스 그룹**: 사용하려는 리소스 그룹을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-270">**Resource Group**: Select the resource group that you want to use.</span></span> <span data-ttu-id="b3ccc-271">새 리소스 그룹을 만들거나 이미 만든 리소스 그룹을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-271">You can either create a new resource group or select one that you've already created.</span></span>
    - <span data-ttu-id="b3ccc-272">**위치**: 이 개체를 만들 위치를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-272">**Location**: Select the location that this object will be created in.</span></span> <span data-ttu-id="b3ccc-273">VNet이 있는 동일한 위치를 선택하는 것이 좋지만 반드시 그럴 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-273">You may want to select the same location that your VNet resides in, but you're not required to do so.</span></span>
5. <span data-ttu-id="b3ccc-274">필요한 값을 모두 지정했으면 **만들기**를 선택하여 로컬 네트워크 게이트웨이를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-274">When you finish specifying the required values, select **Create** to create the local network gateway.</span></span>
6. <span data-ttu-id="b3ccc-275">Azure Stack Hub 배포에서 해당 단계(1-5)를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-275">Repeat these steps (1-5) on your Azure Stack Hub deployment.</span></span>

## <a name="configure-your-connection"></a><span data-ttu-id="b3ccc-276">연결 구성</span><span class="sxs-lookup"><span data-stu-id="b3ccc-276">Configure your connection</span></span>

<span data-ttu-id="b3ccc-277">온-프레미스 네트워크에 대한 사이트 간 연결에는 VPN 디바이스가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-277">Site-to-site connections to an on-premises network require a VPN device.</span></span> <span data-ttu-id="b3ccc-278">구성하는 VPN 디바이스를 연결이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-278">The VPN device you configure is referred to as a connection.</span></span> <span data-ttu-id="b3ccc-279">연결을 구성하려면 다음이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-279">To configure your connection, you need:</span></span>

- <span data-ttu-id="b3ccc-280">공유 키 -</span><span class="sxs-lookup"><span data-stu-id="b3ccc-280">A shared key.</span></span> <span data-ttu-id="b3ccc-281">이 키는 사이트 간 VPN 연결을 만들 때 지정하는 것과 동일한 공유 키입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-281">This key is the same shared key that you specify when creating your site-to-site VPN connection.</span></span> <span data-ttu-id="b3ccc-282">이 예제에서는 기본적인 공유 키를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-282">In our examples, we use a basic shared key.</span></span> <span data-ttu-id="b3ccc-283">실제로 사용할 키는 좀 더 복잡하게 생성하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-283">We recommend that you generate a more complex key to use.</span></span>
- <span data-ttu-id="b3ccc-284">가상 네트워크 게이트웨이의 공용 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-284">The public IP address of your virtual network gateway.</span></span> <span data-ttu-id="b3ccc-285">Azure Portal, PowerShell 또는 CLI를 사용하여 공용 IP 주소를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-285">You can view the public IP address by using the Azure portal, PowerShell, or CLI.</span></span> <span data-ttu-id="b3ccc-286">Azure Portal을 사용하여 VPN 게이트웨이의 공용 IP 주소를 찾으려면 가상 네트워크 게이트웨이로 이동한 다음, 게이트웨이의 이름을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-286">To find the public IP address of your VPN gateway using the Azure portal, go to virtual network gateways, then select the name of your gateway.</span></span>

<span data-ttu-id="b3ccc-287">다음 단계를 사용하여 가상 네트워크 게이트웨이와 온-프레미스 VPN 디바이스 사이에 사이트 간 VPN 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-287">Use the following steps to create a site-to-site VPN connection between your virtual network gateway and your on-premises VPN device.</span></span>

1. <span data-ttu-id="b3ccc-288">Azure Portal에서 **+리소스 만들기**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-288">In the Azure portal, select **+Create a resource**.</span></span>
2. <span data-ttu-id="b3ccc-289">**연결**을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-289">Search for **connections**.</span></span>
3. <span data-ttu-id="b3ccc-290">**결과**에서 **연결**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-290">In **Results**, select **Connections**.</span></span>
4. <span data-ttu-id="b3ccc-291">**연결**에서 **만들기**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-291">On **Connection**, select **Create**.</span></span>
5. <span data-ttu-id="b3ccc-292">**연결 만들기**에서 다음 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-292">On **Create Connection**, configure the following settings:</span></span>

    - <span data-ttu-id="b3ccc-293">**연결 형식**: 사이트 간(IPSec)을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-293">**Connection type**: Select site-to-site (IPSec).</span></span>
    - <span data-ttu-id="b3ccc-294">**리소스 그룹**: 테스트 리소스 그룹을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-294">**Resource Group**: Select your test resource group.</span></span>
    - <span data-ttu-id="b3ccc-295">**가상 네트워크 게이트웨이**: 직접 만든 가상 네트워크 게이트웨이를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-295">**Virtual Network Gateway**: Select the virtual network gateway you created.</span></span>
    - <span data-ttu-id="b3ccc-296">**로컬 네트워크 게이트웨이**: 직접 만든 로컬 네트워크 게이트웨이를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-296">**Local Network Gateway**: Select the local network gateway you created.</span></span>
    - <span data-ttu-id="b3ccc-297">**연결 이름**: 이 이름은 두 게이트웨이의 값을 사용하여 자동으로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-297">**Connection Name**: This name is autopopulated using the values from the two gateways.</span></span>
    - <span data-ttu-id="b3ccc-298">**공유 키**: 이 값은 로컬 온-프레미스 VPN 디바이스에 사용하는 값과 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-298">**Shared Key**: This value must match the value that you're using for your local on-premises VPN device.</span></span> <span data-ttu-id="b3ccc-299">자습서 예제에서는 'abc123'을 사용하지만 더 복잡한 값을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-299">The tutorial example uses 'abc123', but you should use something more complex.</span></span> <span data-ttu-id="b3ccc-300">중요한 점은 이 값이 VPN 디바이스를 구성할 때 지정한 값과 *동일해야 한다*는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-300">The important thing is that this value *must* be the same value that you specify when configuring your VPN device.</span></span>
    - <span data-ttu-id="b3ccc-301">**구독**, **리소스 그룹** 및 **위치**에 대한 값이 고정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-301">The values for **Subscription**, **Resource Group**, and **Location** are fixed.</span></span>

6. <span data-ttu-id="b3ccc-302">**확인**을 선택하여 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-302">Select **OK** to create your connection.</span></span>

<span data-ttu-id="b3ccc-303">가상 네트워크 게이트웨이의 **연결** 페이지에서 연결을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-303">You can see the connection in the **Connections** page of the virtual network gateway.</span></span> <span data-ttu-id="b3ccc-304">상태는 알 수 없음에서 연결 중으로 바뀌고 성공으로 바뀝니다.  </span><span class="sxs-lookup"><span data-stu-id="b3ccc-304">The status will go from *Unknown* to *Connecting*, and then to *Succeeded*.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b3ccc-305">다음 단계</span><span class="sxs-lookup"><span data-stu-id="b3ccc-305">Next steps</span></span>

- <span data-ttu-id="b3ccc-306">Azure Cloud 패턴에 대해 자세히 알아보려면 [클라우드 디자인 패턴](/azure/architecture/patterns)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3ccc-306">To learn more about Azure Cloud Patterns, see [Cloud Design Patterns](/azure/architecture/patterns).</span></span>

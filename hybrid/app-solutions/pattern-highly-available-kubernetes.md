---
title: Azure 및 Azure Stack Hub를 사용하는 고가용성 Kubernetes 패턴
description: Kubernetes 클러스터 솔루션에서 Azure 및 Azure Stack Hub를 사용하여 고가용성을 제공하는 방법을 알아봅니다.
author: BryanLa
ms.topic: article
ms.date: 12/03/2020
ms.author: bryanla
ms.reviewer: bryanla
ms.lastreviewed: 12/03/2020
ms.openlocfilehash: 454cc0a0531882b7a8ec050a461420ce13eebcfe
ms.sourcegitcommit: df7e3e6423c3d4e8a42dae3d1acfba1d55057258
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/09/2020
ms.locfileid: "96912004"
---
# <a name="high-availability-kubernetes-cluster-pattern"></a><span data-ttu-id="f6c09-103">고가용성 Kubernetes 클러스터 패턴</span><span class="sxs-lookup"><span data-stu-id="f6c09-103">High availability Kubernetes cluster pattern</span></span>

<span data-ttu-id="f6c09-104">이 문서에서는 Azure Stack Hub에서 AKS(Azure Kubernetes Service) 엔진을 사용하여 고가용성 Kubernetes 기반 인프라를 설계하고 작동하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-104">This article describes how to architect and operate a highly available Kubernetes-based infrastructure using Azure Kubernetes Service (AKS) Engine on Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-105">이 시나리오는 매우 제한적이고 규제가 엄격한 환경에서 중요한 워크로드가 있는 조직에서 일반적으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-105">This scenario is common for organizations with critical workloads in highly restricted and regulated environments.</span></span> <span data-ttu-id="f6c09-106">이러한 조직으로 금융, 국방 및 정부와 같은 도메인에 속한 조직이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-106">Organizations in domains such as finance, defense, and government.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="f6c09-107">컨텍스트 및 문제점</span><span class="sxs-lookup"><span data-stu-id="f6c09-107">Context and problem</span></span>

<span data-ttu-id="f6c09-108">많은 조직에서 Kubernetes와 같은 최신 서비스와 기술을 활용하는 클라우드 네이티브 솔루션을 개발하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-108">Many organizations are developing cloud-native solutions that leverage state-of-the-art services and technologies like Kubernetes.</span></span> <span data-ttu-id="f6c09-109">Azure는 전 세계 대부분의 지역에서 데이터 센터를 제공하지만, 경우에 따라 특정 위치에서 중요 비즈니스용 애플리케이션을 실행해야 하는 에지 사용 사례 및 시나리오가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-109">Although Azure provides datacenters in most regions of the world, sometimes there are edge use-cases and scenarios where business critical applications must run in a specific location.</span></span> <span data-ttu-id="f6c09-110">고려해야 할 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-110">Considerations include:</span></span>

- <span data-ttu-id="f6c09-111">위치 민감도</span><span class="sxs-lookup"><span data-stu-id="f6c09-111">Location sensitivity</span></span>
- <span data-ttu-id="f6c09-112">애플리케이션 및 온-프레미스 시스템 간의 대기 시간</span><span class="sxs-lookup"><span data-stu-id="f6c09-112">Latency between the application and on-premises systems</span></span>
- <span data-ttu-id="f6c09-113">대역폭 보존</span><span class="sxs-lookup"><span data-stu-id="f6c09-113">Bandwidth conservation</span></span>
- <span data-ttu-id="f6c09-114">연결</span><span class="sxs-lookup"><span data-stu-id="f6c09-114">Connectivity</span></span>
- <span data-ttu-id="f6c09-115">규정 또는 법적 요구 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-115">Regulatory or statutory requirements</span></span>

<span data-ttu-id="f6c09-116">Azure는 Azure Stack Hub와 결합하여 대부분의 이러한 문제를 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-116">Azure, in combination with Azure Stack Hub, addresses most of these concerns.</span></span> <span data-ttu-id="f6c09-117">Azure Stack Hub에서 실행되는 Kubernetes의 성공적인 구현을 위한 광범위한 옵션, 결정 및 고려 사항은 아래에서 설명하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-117">A broad set of options, decisions, and considerations for a successful implementation of Kubernetes running on Azure Stack Hub is described below.</span></span>

## <a name="solution"></a><span data-ttu-id="f6c09-118">해결 방법</span><span class="sxs-lookup"><span data-stu-id="f6c09-118">Solution</span></span>

<span data-ttu-id="f6c09-119">이 패턴에서는 엄격한 제약 조건 세트를 처리해야 한다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-119">This pattern assumes that we have to deal with a strict set of constraints.</span></span> <span data-ttu-id="f6c09-120">애플리케이션은 온-프레미스에서 실행되어야 하며, 모든 개인 데이터가 퍼블릭 클라우드 서비스에 연결되지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-120">The application must run on-premises and all personal data must not reach public cloud services.</span></span> <span data-ttu-id="f6c09-121">모니터링 및 기타 비 PII 데이터는 Azure에 보내 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-121">Monitoring and other non-PII data can be sent to Azure and be processed there.</span></span> <span data-ttu-id="f6c09-122">퍼블릭 Container Registry 등과 같은 외부 서비스에 액세스할 수 있지만 방화벽 또는 프록시 서버를 통해 필터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-122">External services like a public Container Registry or others can be accessed but might be filtered through a firewall or proxy server.</span></span>

<span data-ttu-id="f6c09-123">여기서 보여 주는 애플리케이션 예제([Azure Kubernetes Service 워크샵](/learn/modules/aks-workshop/) 기반)는 가능한 경우 언제든지 Kubernetes 네이티브 솔루션을 사용하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-123">The sample application shown here (based on [Azure Kubernetes Service Workshop](/learn/modules/aks-workshop/)) is designed to use Kubernetes-native solutions whenever possible.</span></span> <span data-ttu-id="f6c09-124">이 디자인은 플랫폼 네이티브 서비스를 사용하는 대신 공급업체에 한정되지 않도록 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-124">This design avoids vendor lock-in, instead of using platform-native services.</span></span> <span data-ttu-id="f6c09-125">예를 들어 애플리케이션에서 PaaS 서비스 또는 외부 데이터베이스 서비스 대신 자체 호스팅 MongoDB 데이터베이스 백 엔드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-125">As an example, the application uses a self-hosted MongoDB database backend instead of a PaaS service or external database service.</span></span>

<span data-ttu-id="f6c09-126">[![애플리케이션 패턴 하이브리드](media/pattern-highly-available-kubernetes/application-architecture.png)](media/pattern-highly-available-kubernetes/application-architecture.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="f6c09-126">[![Application Pattern Hybrid](media/pattern-highly-available-kubernetes/application-architecture.png)](media/pattern-highly-available-kubernetes/application-architecture.png#lightbox)</span></span>

<span data-ttu-id="f6c09-127">앞의 다이어그램에서는 Azure Stack Hub의 Kubernetes에서 실행되는 애플리케이션 예제의 애플리케이션 아키텍처를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-127">The preceding diagram illustrates the application architecture of the sample application running on Kubernetes on Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-128">앱을 구성하는 몇 가지 구성 요소는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-128">The app consists of several components, including:</span></span>

 1) <span data-ttu-id="f6c09-129">AKS Azure Stack Hub의 AKS 엔진 기반 Kubernetes 클러스터</span><span class="sxs-lookup"><span data-stu-id="f6c09-129">An AKS Engine based Kubernetes cluster on Azure Stack Hub.</span></span>
 2) <span data-ttu-id="f6c09-130">[cert-manager](https://www.jetstack.io/cert-manager/) - Let's Encrypt에서 인증서를 자동으로 요청하는 데 사용되는 Kubernetes의 인증서 관리 도구 모음을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-130">[cert-manager](https://www.jetstack.io/cert-manager/), which provides a suite of tools for certificate management in Kubernetes, used to automatically request certificates from Let's Encrypt.</span></span>
 3) <span data-ttu-id="f6c09-131">Kubernetes 네임스페이스 - 프런트 엔드(ratings-web), API(ratings-api) 및 데이터베이스(ratings-mongodb)용 애플리케이션 구성 요소가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-131">A Kubernetes namespace that contains the application components for the front end (ratings-web), api (ratings-api), and database (ratings-mongodb).</span></span>
 4) <span data-ttu-id="f6c09-132">수신 컨트롤러 - HTTP/HTTPS 트래픽을 Kubernetes 클러스터 내의 엔드포인트로 라우팅합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-132">The Ingress Controller that routes HTTP/HTTPS traffic to endpoints within the Kubernetes cluster.</span></span>

<span data-ttu-id="f6c09-133">애플리케이션 예제는 애플리케이션 아키텍처를 설명하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-133">The sample application is used to illustrate the application architecture.</span></span> <span data-ttu-id="f6c09-134">모든 구성 요소는 예입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-134">All components are examples.</span></span> <span data-ttu-id="f6c09-135">아키텍처에는 단일 애플리케이션 배포만 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-135">The architecture contains only a single application deployment.</span></span> <span data-ttu-id="f6c09-136">HA(고가용성)를 달성하기 위해 두 개의 서로 다른 Azure Stack Hub 인스턴스에서 배포를 두 번 이상 실행합니다. 이러한 인스턴스는 동일한 위치 또는 둘 이상의 서로 다른 사이트에서 실행될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-136">To achieve high availability (HA), we'll run the deployment at least twice on two different Azure Stack Hub instances - they can run either in the same location or in two (or more) different sites:</span></span>

![인프라 아키텍처](media/pattern-highly-available-kubernetes/aks-azure-architecture.png)

<span data-ttu-id="f6c09-138">Azure Container Registry, Azure Monitor 등과 같은 서비스는 Azure 또는 온-프레미스의 Azure Stack Hub 외부에서 호스팅됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-138">Services like Azure Container Registry, Azure Monitor, and others, are hosted outside Azure Stack Hub in Azure or on-premises.</span></span> <span data-ttu-id="f6c09-139">이 하이브리드 디자인은 단일 Azure Stack Hub 인스턴스의 중단으로부터 솔루션을 보호합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-139">This hybrid design protects the solution against outage of a single Azure Stack Hub instance.</span></span>

## <a name="components"></a><span data-ttu-id="f6c09-140">구성 요소</span><span class="sxs-lookup"><span data-stu-id="f6c09-140">Components</span></span>

<span data-ttu-id="f6c09-141">전체 아키텍처를 구성하는 구성 요소는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-141">The overall architecture consists of the following components:</span></span>

<span data-ttu-id="f6c09-142">**Azure Stack Hub** 는 데이터 센터에서 Azure 서비스를 제공하여 온-프레미스 환경에서 워크로드를 실행할 수 있는 Azure의 확장입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-142">**Azure Stack Hub** is an extension of Azure that can run workloads in an on-premises environment by providing Azure services in your datacenter.</span></span> <span data-ttu-id="f6c09-143">자세한 내용은 [Azure Stack Hub 개요](/azure-stack/operator/azure-stack-overview)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-143">Go to [Azure Stack Hub overview](/azure-stack/operator/azure-stack-overview) to learn more.</span></span>

<span data-ttu-id="f6c09-144">**AKS 엔진(Azure Kubernetes Service 엔진)** 은 현재 Azure에서 사용할 수 있는 관리되는 Kubernetes 서비스 제품인 AKS(Azure Kubernetes Service)를 지원하는 엔진입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-144">**Azure Kubernetes Service Engine (AKS Engine)** is the engine behind the managed Kubernetes service offering, Azure Kubernetes Service (AKS), that is available in Azure today.</span></span> <span data-ttu-id="f6c09-145">Azure Stack Hub의 경우 AKS 엔진을 사용하면 Azure Stack Hub의 IaaS 기능을 사용하여 모든 기능을 갖춘 자체적으로 관리되는 Kubernetes 클러스터를 배포, 크기 조정 및 업그레이드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-145">For Azure Stack Hub, AKS Engine allows us to deploy, scale, and upgrade fully featured, self-managed Kubernetes clusters using Azure Stack Hub's IaaS capabilities.</span></span> <span data-ttu-id="f6c09-146">자세한 내용은 [AKS 엔진 개요](https://github.com/Azure/aks-engine)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-146">Go to [AKS Engine Overview](https://github.com/Azure/aks-engine) to learn more.</span></span>

<span data-ttu-id="f6c09-147">Azure의 AKS 엔진 및 Azure Stack Hub의 AKS 엔진 간의 차이점에 대한 자세한 내용은 [알려진 문제 및 제한 사항](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#known-issues-and-limitations)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-147">Go to [Known Issues and Limitations](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#known-issues-and-limitations) to learn more about the differences between AKS Engine on Azure and AKS Engine on Azure Stack Hub.</span></span>

<span data-ttu-id="f6c09-148">**Azure VNet(Virtual Network)** 은 Kubernetes 클러스터 인프라를 호스팅하는 VMs(Virtual Machines)의 각 Azure Stack Hub에서 네트워크 인프라를 제공하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-148">**Azure Virtual Network (VNet)** is used to provide the network infrastructure on each Azure Stack Hub for the Virtual Machines (VMs) hosting the Kubernetes cluster infrastructure.</span></span>

<span data-ttu-id="f6c09-149">**Azure Load Balancer** 는 Kubernetes API 엔드포인트 및 Nginx 수신 컨트롤러에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-149">**Azure Load Balancer** is used for the Kubernetes API Endpoint and the Nginx Ingress Controller.</span></span> <span data-ttu-id="f6c09-150">부하 분산 장치는 외부(예: 인터넷) 트래픽을 특정 서비스를 제공하는 노드 및 VM으로 라우팅합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-150">The load balancer routes external (for example, Internet) traffic to nodes and VMs offering a specific service.</span></span>

<span data-ttu-id="f6c09-151">**ACR(Azure Container Registry)** 은 클러스터에 배포되는 프라이빗 Docker 이미지 및 Helm 차트를 저장하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-151">**Azure Container Registry (ACR)** is used to store private Docker images and Helm charts, which are deployed to the cluster.</span></span> <span data-ttu-id="f6c09-152">AKS 엔진은 Azure AD ID를 사용하여 Container Registry를 통해 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-152">AKS Engine can authenticate with the Container Registry using an Azure AD identity.</span></span> <span data-ttu-id="f6c09-153">Kubernetes에는 ACR이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-153">Kubernetes doesn't require ACR.</span></span> <span data-ttu-id="f6c09-154">Docker 허브 같은 다른 컨테이너 레지스트리를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-154">You can use other container registries, such as Docker Hub.</span></span>

<span data-ttu-id="f6c09-155">**Azure Repos** 는 코드를 관리하는 데 사용할 수 있는 버전 제어 도구 세트입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-155">**Azure Repos** is a set of version control tools that you can use to manage your code.</span></span> <span data-ttu-id="f6c09-156">GitHub 또는 기타 git 기반 리포지토리를 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-156">You can also use GitHub or other git-based repositories.</span></span> <span data-ttu-id="f6c09-157">자세한 내용은 [Azure Repos 개요](/azure/devops/repos/get-started/what-is-repos)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-157">Go to [Azure Repos Overview](/azure/devops/repos/get-started/what-is-repos) to learn more.</span></span>

<span data-ttu-id="f6c09-158">**Azure Pipelines** 는 Azure DevOps Services의 일부이며 자동화된 빌드, 테스트 및 배포를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-158">**Azure Pipelines** is part of Azure DevOps Services and runs automated builds, tests, and deployments.</span></span> <span data-ttu-id="f6c09-159">Jenkins 같은 타사 CI/CD 솔루션도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-159">You can also use third-party CI/CD solutions such as Jenkins.</span></span> <span data-ttu-id="f6c09-160">자세한 내용은 [Azure Pipelines 개요](/azure/devops/pipelines/get-started/what-is-azure-pipelines)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-160">Go to [Azure Pipeline Overview](/azure/devops/pipelines/get-started/what-is-azure-pipelines) to learn more.</span></span>

<span data-ttu-id="f6c09-161">**Azure Monitor** 는 솔루션 및 애플리케이션 원격 분석의 Azure 서비스에 대한 플랫폼 메트릭을 포함하여 메트릭 및 로그를 수집 및 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-161">**Azure Monitor** collects and stores metrics and logs, including platform metrics for the Azure services in the solution and application telemetry.</span></span> <span data-ttu-id="f6c09-162">이 데이터를 사용하여 애플리케이션을 모니터링하고, 경고 및 대시보드를 설정하고, 오류의 근본 원인을 분석할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-162">Use this data to monitor the application, set up alerts and dashboards, and perform root cause analysis of failures.</span></span> <span data-ttu-id="f6c09-163">Azure Monitor는 Kubernetes와 통합되어 컨트롤러, 노드 및 컨테이너뿐만 아니라 컨테이너 로그 및 마스터 노드 로그에서도 메트릭을 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-163">Azure Monitor integrates with Kubernetes to collect metrics from controllers, nodes, and containers, as well as container logs and master node logs.</span></span> <span data-ttu-id="f6c09-164">자세한 내용은 [Azure Monitor 개요](/azure/azure-monitor/overview)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-164">Go to [Azure Monitor Overview](/azure/azure-monitor/overview) to learn more.</span></span>

<span data-ttu-id="f6c09-165">**Azure Traffic Manager** 는 다양한 Azure 지역 또는 Azure Stack Hub 배포에서 트래픽을 서비스에 최적으로 분산할 수 있도록 하는 DNS 기반 트래픽 부하 분산 장치입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-165">**Azure Traffic Manager** is a DNS-based traffic load balancer that enables you to distribute traffic optimally to services across different Azure regions or Azure Stack Hub deployments.</span></span> <span data-ttu-id="f6c09-166">또한 Traffic Manager는 고가용성 및 응답성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-166">Traffic Manager also provides high availability and responsiveness.</span></span> <span data-ttu-id="f6c09-167">애플리케이션 엔드포인트는 외부에서 액세스할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-167">The application endpoints must be accessible from the outside.</span></span> <span data-ttu-id="f6c09-168">다른 온-프레미스 솔루션도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-168">There are other on-premises solutions available as well.</span></span>

<span data-ttu-id="f6c09-169">**Kubernetes 수신 컨트롤러** 는 HTTP(S) 경로를 Kubernetes 클러스터의 서비스에 공개합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-169">**Kubernetes Ingress Controller** exposes HTTP(S) routes to services in a Kubernetes cluster.</span></span> <span data-ttu-id="f6c09-170">이를 위해 Nginx 또는 적절한 수신 컨트롤러를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-170">Nginx or any suitable ingress controller can be used for this purpose.</span></span>

<span data-ttu-id="f6c09-171">**Helm** 은 배포, 서비스, 비밀과 같은 다양한 Kubernetes 개체를 단일 "차트"로 묶을 수 있는 방법을 제공하는 Kubernetes 배포용 패키지 관리자입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-171">**Helm** is a package manager for Kubernetes deployment, providing a way to bundle different Kubernetes objects like Deployments, Services, Secrets, into a single "chart".</span></span> <span data-ttu-id="f6c09-172">버전 관리를 게시, 배포 및 제어하고 차트 개체를 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-172">You can publish, deploy, control version management, and update a chart  object.</span></span> <span data-ttu-id="f6c09-173">Azure Container Registry는 패키지된 Helm 차트를 저장하는 리포지토리로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-173">Azure Container Registry can be used as a repository to store packaged Helm Charts.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="f6c09-174">디자인 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-174">Design considerations</span></span>

<span data-ttu-id="f6c09-175">이 패턴에서는 이 문서의 다음 섹션에서 자세히 설명하는 몇 가지 개략적인 고려 사항을 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-175">This pattern follows a few high-level considerations explained in more detail in the next sections of this article:</span></span>

- <span data-ttu-id="f6c09-176">애플리케이션은 공급업체에 한정되지 않도록 방지하기 위해 Kubernetes 네이티브 솔루션을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-176">The application uses Kubernetes-native solutions, to avoid vendor lock-in.</span></span>
- <span data-ttu-id="f6c09-177">애플리케이션에서 마이크로서비스 아키텍처를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-177">The application uses a microservices architecture.</span></span>
- <span data-ttu-id="f6c09-178">Azure Stack Hub에는 인바운드가 필요하지 않지만 아웃바운드 인터넷 연결이 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-178">Azure Stack Hub doesn't need inbound but allows outbound Internet connectivity.</span></span>

<span data-ttu-id="f6c09-179">이러한 추천 사례는 실제 워크로드 및 시나리오에도 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-179">These recommended practices will apply to real-world workloads and scenarios as well.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="f6c09-180">확장성 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-180">Scalability considerations</span></span>

<span data-ttu-id="f6c09-181">확장성은 사용자에게 애플리케이션에 대한 일관되고, 안정적이며, 효율적으로 수행되는 액세스를 제공하는 데 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-181">Scalability is important to provide users consistent, reliable, and well-performing access to the application.</span></span>

<span data-ttu-id="f6c09-182">샘플 시나리오에서는 애플리케이션 스택의 여러 계층에 대한 확장성을 다루고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-182">The sample scenario covers scalability on multiple layers of the application stack.</span></span> <span data-ttu-id="f6c09-183">여러 계층에 대한 개략적인 개요는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-183">Here's a high-level overview of the different layers:</span></span>

| <span data-ttu-id="f6c09-184">아키텍처 수준</span><span class="sxs-lookup"><span data-stu-id="f6c09-184">Architecture level</span></span> | <span data-ttu-id="f6c09-185">영향</span><span class="sxs-lookup"><span data-stu-id="f6c09-185">Affects</span></span> | <span data-ttu-id="f6c09-186">방법은?</span><span class="sxs-lookup"><span data-stu-id="f6c09-186">How?</span></span> |
| --- | --- | ---
| <span data-ttu-id="f6c09-187">애플리케이션</span><span class="sxs-lookup"><span data-stu-id="f6c09-187">Application</span></span> | <span data-ttu-id="f6c09-188">애플리케이션</span><span class="sxs-lookup"><span data-stu-id="f6c09-188">Application</span></span> | <span data-ttu-id="f6c09-189">Pod/복제본/Container Instances 수에 따른 수평 크기 조정\*</span><span class="sxs-lookup"><span data-stu-id="f6c09-189">Horizontal scaling based on the number of Pods/Replicas/Container Instances\*</span></span> |
| <span data-ttu-id="f6c09-190">클러스터</span><span class="sxs-lookup"><span data-stu-id="f6c09-190">Cluster</span></span> | <span data-ttu-id="f6c09-191">Kubernetes 클러스터</span><span class="sxs-lookup"><span data-stu-id="f6c09-191">Kubernetes cluster</span></span> | <span data-ttu-id="f6c09-192">노드(1~50개), VM-SKU 크기 및 노드 풀(Azure Stack Hub의 AKS 엔진은 현재 단일 노드 풀만 지원함)의 수 - AKS 엔진의 크기 조정 명령 사용(수동)</span><span class="sxs-lookup"><span data-stu-id="f6c09-192">Number of Nodes (between 1 and 50), VM-SKU-sizes, and Node Pools (AKS Engine on Azure Stack Hub currently supports only a single node pool); using AKS Engine's scale command (manual)</span></span> |
| <span data-ttu-id="f6c09-193">인프라</span><span class="sxs-lookup"><span data-stu-id="f6c09-193">Infrastructure</span></span> | <span data-ttu-id="f6c09-194">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="f6c09-194">Azure Stack Hub</span></span> | <span data-ttu-id="f6c09-195">Azure Stack Hub 배포 내의 노드, 용량 및 배율 단위의 수</span><span class="sxs-lookup"><span data-stu-id="f6c09-195">Number of nodes, capacity, and scale units within an Azure Stack Hub deployment</span></span> |

<span data-ttu-id="f6c09-196">\* Kubernetes의 HPA(수평 Pod 자동 크기 조정기)를 사용합니다. 이는 컨테이너 인스턴스 크기(CPU/메모리)를 조정하여 자동화된 메트릭 기반 크기 조정 또는 수직 크기 조정입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-196">\* Using Kubernetes' Horizontal Pod Autoscaler (HPA); automated metric-based scaling or vertical scaling by sizing the container instances (cpu/memory).</span></span>

<span data-ttu-id="f6c09-197">**Azure Stack Hub(인프라 수준)**</span><span class="sxs-lookup"><span data-stu-id="f6c09-197">**Azure Stack Hub (infrastructure level)**</span></span>

<span data-ttu-id="f6c09-198">Azure Stack Hub가 데이터 센터의 실제 하드웨어에서 실행되므로 Azure Stack Hub 인프라는 이 구현의 기반입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-198">The Azure Stack Hub infrastructure is the foundation of this implementation, because Azure Stack Hub runs on physical hardware in a datacenter.</span></span> <span data-ttu-id="f6c09-199">허브 하드웨어를 선택하는 경우 CPU, 메모리 밀도, 스토리지 구성 및 서버 수를 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-199">When selecting your Hub hardware, you need to make choices for CPU, memory density, storage configuration, and number of servers.</span></span> <span data-ttu-id="f6c09-200">Azure Stack Hub의 확장성에 대해 자세히 알아보려면 다음 리소스를 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-200">To learn more about Azure Stack Hub's scalability, check out the following resources:</span></span>

- [<span data-ttu-id="f6c09-201">Azure Stack Hub에 대한 용량 계획 개요</span><span class="sxs-lookup"><span data-stu-id="f6c09-201">Capacity planning for Azure Stack Hub overview</span></span>](/azure-stack/operator/azure-stack-capacity-planning-overview)
- [<span data-ttu-id="f6c09-202">Azure Stack Hub에 추가 배율 단위 노드 추가</span><span class="sxs-lookup"><span data-stu-id="f6c09-202">Add additional scale unit nodes in Azure Stack Hub</span></span>](/azure-stack/operator/azure-stack-add-scale-node)

<span data-ttu-id="f6c09-203">**Kubernetes 클러스터(클러스터 수준)**</span><span class="sxs-lookup"><span data-stu-id="f6c09-203">**Kubernetes cluster (cluster level)**</span></span>

<span data-ttu-id="f6c09-204">Kubernetes 클러스터 자체는 컴퓨팅, 스토리지 및 네트워크 리소스를 포함한 Azure(Stack) IaaS 구성 요소로 구성되며, 이를 기반으로 하여 빌드됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-204">The Kubernetes cluster itself consists of, and is built on top of Azure (Stack) IaaS components including compute, storage, and network resources.</span></span> <span data-ttu-id="f6c09-205">Kubernetes 솔루션에는 Azure(및 Azure Stack Hub)에서 VM으로 배포되는 마스터 및 작업자 노드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-205">Kubernetes solutions involve master and worker nodes, which are deployed as VMs in Azure (and Azure Stack Hub).</span></span>

- <span data-ttu-id="f6c09-206">[컨트롤 플레인 노드](/azure/aks/concepts-clusters-workloads#control-plane)(마스터)는 핵심 Kubernetes 서비스 및 애플리케이션 워크로드 오케스트레이션을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-206">[Control plane nodes](/azure/aks/concepts-clusters-workloads#control-plane) (master) provide the core Kubernetes services and orchestration of application workloads.</span></span>
- <span data-ttu-id="f6c09-207">[작업자 노드](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools)(작업자)는 애플리케이션 워크로드를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-207">[Worker nodes](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) (worker) run your application workloads.</span></span>

<span data-ttu-id="f6c09-208">초기 배포에 사용할 VM 크기를 선택하는 경우 다음과 같은 몇 가지 고려 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-208">When selecting VM sizes for the initial deployment, there are several considerations:</span></span>  

- <span data-ttu-id="f6c09-209">**비용** - 작업자 노드를 계획하는 경우 발생하는 VM당 전체 비용을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-209">**Cost** - When planning your worker nodes, keep in mind the overall cost per VM you'll incur.</span></span> <span data-ttu-id="f6c09-210">예를 들어 애플리케이션 워크로드에 제한된 리소스가 필요한 경우 더 작은 크기의 VM을 배포하도록 계획해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-210">For example, if your application workloads require limited resources, you should plan to deploy smaller sized VMs.</span></span> <span data-ttu-id="f6c09-211">Azure와 마찬가지로, Azure Stack Hub는 일반적으로 사용량을 기준으로 청구되므로 Kubernetes 역할에 맞게 VM 크기를 적절하게 조정하는 것은 사용량 비용을 최적화하는 데 매우 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-211">Azure Stack Hub, like Azure, is normally billed on a consumption basis, so appropriately sizing the VMs for Kubernetes roles is crucial to optimizing consumption costs.</span></span> 

- <span data-ttu-id="f6c09-212">**확장성** - 클러스터의 확장성은 마스터 및 작업자 노드의 수를 축소 및 확장하거나 추가 노드 풀을 추가하여 달성됩니다(현재 Azure Stack Hub에서는 사용할 수 없음).</span><span class="sxs-lookup"><span data-stu-id="f6c09-212">**Scalability** - Scalability of the cluster is achieved by scaling in and out the number of master and worker nodes, or by adding additional node pools (not available on Azure Stack Hub today).</span></span> <span data-ttu-id="f6c09-213">클러스터 크기 조정은 Container Insights(Azure Monitor + Log Analytics)를 사용하여 수집된 성능 데이터를 기반으로 하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-213">Scaling the cluster can be done based on performance data, collected using Container Insights (Azure Monitor + Log Analytics).</span></span> 

    <span data-ttu-id="f6c09-214">애플리케이션에 더 많은(또는 더 적은) 리소스가 필요한 경우 현재 노드를 수평으로 확장(또는 축소)할 수 있습니다(1~50개 노드).</span><span class="sxs-lookup"><span data-stu-id="f6c09-214">If your application needs more (or fewer) resources, you can scale out (or in) your current nodes horizontally (between 1 and 50 nodes).</span></span> <span data-ttu-id="f6c09-215">50개보다 많은 노드가 필요한 경우 별도의 구독에서 추가 클러스터를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-215">If you need more than 50 nodes, you can create an additional cluster in a separate subscription.</span></span> <span data-ttu-id="f6c09-216">클러스터를 다시 배포해야 실제 VM을 다른 VM 크기로 수직으로 스케일 업할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-216">You can't scale up the actual VMs vertically to another VM size without redeploying the cluster.</span></span>

    <span data-ttu-id="f6c09-217">크기 조정은 처음에 Kubernetes 클러스터를 배포하는 데 사용된 AKS 엔진 도우미 VM을 사용하여 수동으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-217">Scaling is done manually using the AKS Engine helper VM that was used to deploy the Kubernetes cluster initially.</span></span> <span data-ttu-id="f6c09-218">자세한 내용은 [Kubernetes 클러스터 크기 조정](https://github.com/Azure/aks-engine/blob/master/docs/topics/scale.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-218">For more information, see [Scaling Kubernetes clusters](https://github.com/Azure/aks-engine/blob/master/docs/topics/scale.md)</span></span>

- <span data-ttu-id="f6c09-219">**할당량** - Azure Stack Hub에서 AKS 배포를 계획하는 경우 구성한 [할당량](/azure-stack/operator/azure-stack-quota-types)을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-219">**Quotas** - Consider the [quotas](/azure-stack/operator/azure-stack-quota-types) you've configured when planning out an AKS deployment on your Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-220">각 [구독](/azure-stack/operator/service-plan-offer-subscription-overview)에 적절한 계획과 할당량이 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-220">Make sure each [subscription](/azure-stack/operator/service-plan-offer-subscription-overview) has the proper plans and the quotas configured.</span></span> <span data-ttu-id="f6c09-221">규모가 확장될 때 구독은 클러스터에 필요한 컴퓨팅, 스토리지 및 기타 서비스의 양을 수용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-221">The subscription will need to accommodate the amount of compute, storage, and other services needed for your clusters as they scale out.</span></span>

- <span data-ttu-id="f6c09-222">**애플리케이션 워크로드** - Azure Kubernetes Service에 대한 Kubernetes 핵심 개념 문서에서 [클러스터 및 워크로드 개념](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools)을 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-222">**Application workloads** - Refer to the [Clusters and workloads concepts](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) in the Kubernetes core concepts for Azure Kubernetes Service document.</span></span> <span data-ttu-id="f6c09-223">이 문서는 애플리케이션의 컴퓨팅 및 메모리 요구 사항에 따라 적절한 VM 크기의 범위를 지정하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-223">This article will help you scope the proper VM size based on the compute and memory needs of your application.</span></span>  

<span data-ttu-id="f6c09-224">**애플리케이션(애플리케이션 수준)**</span><span class="sxs-lookup"><span data-stu-id="f6c09-224">**Application (application level)**</span></span>

<span data-ttu-id="f6c09-225">애플리케이션 계층에서는 Kubernetes [HPA(수평 Pod 자동 크기 조정기)](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/)를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-225">On the application layer, we use Kubernetes [Horizontal Pod Autoscaler (HPA)](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/).</span></span> <span data-ttu-id="f6c09-226">HPA는 CPU 사용률과 같은 다양한 메트릭에 따라 배포에서 복제본(Pod/Container Instances) 수를 늘리거나 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-226">HPA can increase or decrease the number of Replicas (Pod/Container Instances) in our deployment based on different metrics (like CPU utilization).</span></span>

<span data-ttu-id="f6c09-227">또 다른 옵션은 컨테이너 인스턴스의 크기를 수직으로 조정하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-227">Another option is to scale container instances vertically.</span></span> <span data-ttu-id="f6c09-228">이는 특정 배포에 대해 요청되고 사용 가능한 CPU 및 메모리의 양을 변경하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-228">This can be accomplished by changing the amount of CPU and Memory requested and available for a specific deployment.</span></span> <span data-ttu-id="f6c09-229">자세한 내용은 kubernetes.io의 [컨테이너용 리소스 관리](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-229">See [Managing Resources for Containers](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) on kubernetes.io to learn more.</span></span>

## <a name="networking-and-connectivity-considerations"></a><span data-ttu-id="f6c09-230">네트워킹 및 연결 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-230">Networking and connectivity considerations</span></span>

<span data-ttu-id="f6c09-231">네트워킹 및 연결은 Azure Stack Hub의 Kubernetes에 대해 앞에서 언급한 세 가지 계층에도 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-231">Networking and connectivity also affect the three layers mentioned previously for Kubernetes on Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-232">다음 표에서는 이러한 계층 및 해당 계층에 포함된 서비스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-232">The following table shows the layers and which services they contain:</span></span>

| <span data-ttu-id="f6c09-233">계층</span><span class="sxs-lookup"><span data-stu-id="f6c09-233">Layer</span></span> | <span data-ttu-id="f6c09-234">영향</span><span class="sxs-lookup"><span data-stu-id="f6c09-234">Affects</span></span> | <span data-ttu-id="f6c09-235">무엇을?</span><span class="sxs-lookup"><span data-stu-id="f6c09-235">What?</span></span> |
| --- | --- | ---
| <span data-ttu-id="f6c09-236">애플리케이션</span><span class="sxs-lookup"><span data-stu-id="f6c09-236">Application</span></span> | <span data-ttu-id="f6c09-237">애플리케이션</span><span class="sxs-lookup"><span data-stu-id="f6c09-237">Application</span></span> | <span data-ttu-id="f6c09-238">애플리케이션에 어떻게 액세스할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="f6c09-238">How is the application accessible?</span></span> <span data-ttu-id="f6c09-239">인터넷에 공개되나요?</span><span class="sxs-lookup"><span data-stu-id="f6c09-239">Will it be exposed to the Internet?</span></span> |
| <span data-ttu-id="f6c09-240">클러스터</span><span class="sxs-lookup"><span data-stu-id="f6c09-240">Cluster</span></span> | <span data-ttu-id="f6c09-241">Kubernetes 클러스터</span><span class="sxs-lookup"><span data-stu-id="f6c09-241">Kubernetes cluster</span></span> | <span data-ttu-id="f6c09-242">Kubernetes API, AKS 엔진 VM, 컨테이너 이미지 끌어오기(송신), 모니터링 데이터 및 원격 분석 보내기(송신)</span><span class="sxs-lookup"><span data-stu-id="f6c09-242">Kubernetes API, AKS Engine VM, Pulling container images (egress), Sending monitoring data and telemetry (egress)</span></span> |
| <span data-ttu-id="f6c09-243">인프라</span><span class="sxs-lookup"><span data-stu-id="f6c09-243">Infrastructure</span></span> | <span data-ttu-id="f6c09-244">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="f6c09-244">Azure Stack Hub</span></span> | <span data-ttu-id="f6c09-245">Azure Stack Hub 관리 엔드포인트(예: 포털 및 Azure Resource Manager 엔드포인트)의 접근성</span><span class="sxs-lookup"><span data-stu-id="f6c09-245">Accessibility of the Azure Stack Hub management endpoints like the portal and Azure Resource Manager endpoints.</span></span> |

<span data-ttu-id="f6c09-246">**애플리케이션**</span><span class="sxs-lookup"><span data-stu-id="f6c09-246">**Application**</span></span>

<span data-ttu-id="f6c09-247">애플리케이션 계층의 경우 가장 중요한 고려 사항은 애플리케이션이 공개되고 인터넷에서 액세스할 수 있는지 여부입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-247">For the application layer, the most important consideration is whether the application is exposed and accessible from the Internet.</span></span> <span data-ttu-id="f6c09-248">Kubernets 관점에서 인터넷 접근성은 Kubernets Service 또는 수신 컨트롤러를 사용하여 배포 또는 Pod를 공개하는 것을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-248">From a Kubernetes perspective, Internet accessibility means exposing a deployment or pod using a Kubernetes Service or an Ingress Controller.</span></span>

> [!NOTE]
> <span data-ttu-id="f6c09-249">Azure Stack Hub의 프런트 엔드 공용 IP 수가 5개로 제한되므로 수신 컨트롤러를 사용하여 Kubernetes Service를 공개하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-249">We recommend the use of Ingress controllers to expose Kubernetes Services as the number of Frontend public IPs on Azure Stack Hub is limited to 5.</span></span> <span data-ttu-id="f6c09-250">또한 이 디자인은 Kubernetes Service(LoadBalancer 유형)의 수를 5개로 제한하며, 이는 많은 배포에 비해 너무 적습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-250">This design also limits the number of Kubernetes Services (with the type LoadBalancer) to 5, which will be too small for many deployments.</span></span> <span data-ttu-id="f6c09-251">자세한 내용은 [AKS 엔진 설명서](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#limited-number-of-frontend-public-ips)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-251">Go to the [AKS Engine documentation](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#limited-number-of-frontend-public-ips) to learn more.</span></span>

<span data-ttu-id="f6c09-252">Load Balancer 또는 수신 컨트롤러를 통해 공용 IP를 사용하여 애플리케이션을 공개한다고 해서 반드시 인터넷을 통해 애플리케이션에 액세스할 수 있는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-252">Exposing an application using a public IP via a Load Balancer or an Ingress Controller doesn't nessecarily mean that the application is now accessible via the Internet.</span></span> <span data-ttu-id="f6c09-253">Azure Stack Hub에는 로컬 인트라넷에만 표시되는 공용 IP 주소가 있을 수 있으며, 모든 공용 IP가 실제로 인터넷에 연결되는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-253">It's possible for Azure Stack Hub to have a public IP address that is only visible on the local intranet - not all public IPs are truly Internet-facing.</span></span>

<span data-ttu-id="f6c09-254">이전 블록에서는 애플리케이션에 대한 수신 트래픽을 고려했지만,</span><span class="sxs-lookup"><span data-stu-id="f6c09-254">The previous block considers ingress traffic to the application.</span></span> <span data-ttu-id="f6c09-255">성공적인 Kubernetes 배포를 위해 고려해야 하는 또 다른 항목으로 아웃바운드/송신 트래픽이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-255">Another topic that must be considered for a successful Kubernetes deployment is outbound/egress traffic.</span></span> <span data-ttu-id="f6c09-256">송신 트래픽이 필요한 몇 가지 사용 사례는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-256">Here are a few use cases that require egress traffic:</span></span>

- <span data-ttu-id="f6c09-257">DockerHub 또는 Azure Container Registry에 저장된 컨테이너 이미지 끌어오기</span><span class="sxs-lookup"><span data-stu-id="f6c09-257">Pulling Container Images stored on DockerHub or Azure Container Registry</span></span>
- <span data-ttu-id="f6c09-258">Helm 차트 검색</span><span class="sxs-lookup"><span data-stu-id="f6c09-258">Retrieving Helm Charts</span></span>
- <span data-ttu-id="f6c09-259">Application Insights 데이터(또는 기타 모니터링 데이터) 내보내기</span><span class="sxs-lookup"><span data-stu-id="f6c09-259">Emitting Application Insights data (or other monitoring data)</span></span>

<span data-ttu-id="f6c09-260">일부 엔터프라이즈 환경에서는 _투명_ 또는 _불투명_ 프록시 서버를 사용해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-260">Some enterprise environments might require the use of _transparent_ or _non-transparent_ proxy servers.</span></span> <span data-ttu-id="f6c09-261">이러한 서버에는 클러스터의 다양한 구성 요소에 대한 특정 구성이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-261">These servers require specific configuration on various components of our cluster.</span></span> <span data-ttu-id="f6c09-262">AKS 엔진 설명서에는 네트워크 프록시를 수용하는 방법에 대한 다양한 세부 정보가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-262">The AKS Engine documentation contains various details on how to accommodate network proxies.</span></span> <span data-ttu-id="f6c09-263">자세한 내용은 [AKS 엔진 및 프록시 서버](https://github.com/Azure/aks-engine/blob/master/docs/topics/proxy-servers.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-263">For more details, see [AKS Engine and proxy servers](https://github.com/Azure/aks-engine/blob/master/docs/topics/proxy-servers.md)</span></span>

<span data-ttu-id="f6c09-264">마지막으로, 클러스터 간 트래픽이 Azure Stack Hub 인스턴스 간에 이동해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-264">Lastly, cross-cluster traffic must flow between Azure Stack Hub instances.</span></span> <span data-ttu-id="f6c09-265">배포 샘플은 개별 Azure Stack Hub 인스턴스에서 실행되는 개별 Kubernetes 클러스터로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-265">The sample deployment consists of individual Kubernetes clusters running on individual Azure Stack Hub instances.</span></span> <span data-ttu-id="f6c09-266">두 데이터베이스 간의 복제 트래픽과 같은 두 클러스터 간의 트래픽은 "외부 트래픽"입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-266">Traffic between them, such as the replication traffic between two databases, is "external traffic".</span></span> <span data-ttu-id="f6c09-267">두 개의 Azure Stack Hub 인스턴스에서 Kubernetes를 연결하려면 외부 트래픽이 사이트 간 VPN 또는 Azure Stack Hub 공용 IP 주소를 통해 라우팅되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-267">External traffic must be routed through either a Site-to-Site VPN or Azure Stack Hub Public IP addresses to connect Kubernetes on two Azure Stack Hub instances:</span></span>

![클러스터 내부 트래픽 및 클러스터 간 트래픽](media/pattern-highly-available-kubernetes/aks-inter-and-intra-cluster-traffic.png)

<span data-ttu-id="f6c09-269">**Cluster**</span><span class="sxs-lookup"><span data-stu-id="f6c09-269">**Cluster**</span></span>  

<span data-ttu-id="f6c09-270">Kubernetes 클러스터는 반드시 인터넷을 통해 액세스할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-270">The Kubernetes cluster doesn't necessarily need to be accessible via the Internet.</span></span> <span data-ttu-id="f6c09-271">관련 부분은 클러스터를 작동하는 데 사용되는 Kubernetes API입니다(예: `kubectl` 사용).</span><span class="sxs-lookup"><span data-stu-id="f6c09-271">The relevant part is the Kubernetes API used to operate a cluster, for example, using `kubectl`.</span></span> <span data-ttu-id="f6c09-272">Kubernetes API 엔드포인트는 클러스터를 작동하거나 이를 기반으로 하여 애플리케이션 및 서비스를 배포하는 모든 사용자가 액세스할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-272">The Kubernetes API endpoint must be accessible to everyone who operates the cluster or deploys applications and services on top of it.</span></span> <span data-ttu-id="f6c09-273">이 항목은 아래의 [배포(CI/CD) 고려 사항](#deployment-cicd-considerations) 섹션의 DevOps 관점에서 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-273">This topic is covered in more detail from a DevOps-perspective in the [Deployment (CI/CD) considerations](#deployment-cicd-considerations) section below.</span></span>

<span data-ttu-id="f6c09-274">클러스터 수준에는 송신 트래픽과 관련된 몇 가지 고려 사항도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-274">On the cluster level, there are also a few considerations around egress-traffic:</span></span>

- <span data-ttu-id="f6c09-275">노드 업데이트(Ubuntu용)</span><span class="sxs-lookup"><span data-stu-id="f6c09-275">Node updates (for Ubuntu)</span></span>
- <span data-ttu-id="f6c09-276">모니터링 데이터(Azure LogAnalytics로 전송)</span><span class="sxs-lookup"><span data-stu-id="f6c09-276">Monitoring data (sent to Azure LogAnalytics)</span></span>
- <span data-ttu-id="f6c09-277">아웃바운드 트래픽이 필요한 기타 에이전트(각 배포자의 환경에 따라 다름)</span><span class="sxs-lookup"><span data-stu-id="f6c09-277">Other agents requiring outbound traffic (specific to each deployer's environment)</span></span>

<span data-ttu-id="f6c09-278">AKS 엔진을 사용하여 Kubernetes 클러스터를 배포하기 전에 최종 네트워킹 디자인을 계획합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-278">Before you deploy your Kubernetes cluster using AKS Engine, plan for the final networking design.</span></span> <span data-ttu-id="f6c09-279">전용 Virtual Network를 만드는 대신 클러스터를 기존 네트워크에 배포하는 것이 더 효율적일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-279">Instead of creating a dedicated Virtual Network, it may be more efficient to deploy a cluster into an existing network.</span></span> <span data-ttu-id="f6c09-280">예를 들어 Azure Stack Hub 환경에 이미 구성된 기존 사이트 간 VPN 연결을 활용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-280">For example, you might leverage an existing Site-to-Site VPN connection already configured in your Azure Stack Hub environment.</span></span>

<span data-ttu-id="f6c09-281">**인프라**</span><span class="sxs-lookup"><span data-stu-id="f6c09-281">**Infrastructure**</span></span>  

<span data-ttu-id="f6c09-282">인프라는 Azure Stack Hub 관리 엔드포인트에 액세스하는 것을 말합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-282">Infrastructure refers to accessing the Azure Stack Hub management endpoints.</span></span> <span data-ttu-id="f6c09-283">엔드포인트에는 테넌트 및 관리 포털과 Azure Resource Manager 관리 및 테넌트 엔드포인트가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-283">Endpoints include the tenant and admin portals, and the Azure Resource Manager admin and tenant endpoints.</span></span> <span data-ttu-id="f6c09-284">이러한 엔드포인트는 Azure Stack Hub 및 핵심 서비스를 작동하는 데 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-284">These endpoints are required to operate Azure Stack Hub and its core services.</span></span>

## <a name="data-and-storage-considerations"></a><span data-ttu-id="f6c09-285">데이터 및 스토리지 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-285">Data and storage considerations</span></span>

<span data-ttu-id="f6c09-286">두 개의 Azure Stack Hub 인스턴스에서 두 개의 애플리케이션 인스턴스가 두 개의 개별 Kubernetes 클러스터에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-286">Two instances of our application will be deployed, on two individual Kubernetes clusters, across two Azure Stack Hub instances.</span></span> <span data-ttu-id="f6c09-287">이 디자인에서는 데이터를 복제하고 동기화하는 방법을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-287">This design will require us to consider how to replicate and synchronize data between them.</span></span>

<span data-ttu-id="f6c09-288">Azure를 사용하면 클라우드 내의 여러 지역 및 영역에서 스토리지를 복제하는 기본 제공 기능을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-288">With Azure, we have the built-in capability to replicate storage across multiple regions and zones within the cloud.</span></span> <span data-ttu-id="f6c09-289">현재 Azure Stack Hub에는 두 개의 서로 다른 Azure Stack Hub 인스턴스에서 스토리지를 복제하는 기본적인 방법이 없습니다. 두 개의 독립된 클라우드를 만들어 하나의 세트로 관리할 수 있는 중요한 방법이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-289">Currently with Azure Stack Hub there are no native ways to replicate storage across two different Azure Stack Hub instances - they form two independent clouds with no overarching way to manage them as a set.</span></span> <span data-ttu-id="f6c09-290">Azure Stack Hub에서 실행되는 애플리케이션의 복원력을 계획하는 경우 애플리케이션 디자인 및 배포에서 이러한 독립성을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-290">Planning for resiliency of applications running across Azure Stack Hub forces you to consider this independence in your application design and deployments.</span></span>

<span data-ttu-id="f6c09-291">대부분의 경우 AKS에 배포된 복원력이 있고 가용성이 높은 애플리케이션에는 스토리지 복제가 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-291">In most cases, storage replication won't be necessary for a resilient and highly available application deployed on AKS.</span></span> <span data-ttu-id="f6c09-292">그러나 애플리케이션 디자인에서는 Azure Stack Hub 인스턴스당 독립적인 스토리지를 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-292">But you should consider independent storage per Azure Stack Hub instance in your application design.</span></span> <span data-ttu-id="f6c09-293">이 디자인이 솔루션을 Azure Stack Hub에 배포하는 데 문제 또는 장애물이 되는 경우 스토리지 첨부를 제공하는 Microsoft 파트너의 솔루션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-293">If this design is a concern or road block to deploying the solution on Azure Stack Hub, there are possible solutions from Microsoft Partners that provide storage attachments.</span></span> <span data-ttu-id="f6c09-294">스토리지 첨부는 여러 Azure Stack Hub 및 Azure에서 스토리지 복제 솔루션을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-294">Storage attachments provide a storage replication solution across multiple Azure Stack Hubs and Azure.</span></span> <span data-ttu-id="f6c09-295">자세한 내용은 [파트너 솔루션](#partner-solutions)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-295">For more information, see the [Partner solutions](#partner-solutions).</span></span>

<span data-ttu-id="f6c09-296">아키텍처에서 고려된 계층은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-296">In our architecture, these layers were considered:</span></span>

<span data-ttu-id="f6c09-297">**Configuration**</span><span class="sxs-lookup"><span data-stu-id="f6c09-297">**Configuration**</span></span>

<span data-ttu-id="f6c09-298">구성에는 Azure Stack Hub, AKS 엔진 및 Kubernetes 클러스터 자체의 구성이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-298">Configuration includes the configuration of Azure Stack Hub, AKS Engine, and the Kubernetes cluster itself.</span></span> <span data-ttu-id="f6c09-299">구성은 최대한 자동화되어야 하며, Git 기반 버전 제어 시스템(예: Azure DevOps 또는 GitHub)에서 Infrastructure-as-Code로 저장되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-299">The configuration should be automated as much as possible, and stored as Infrastructure-as-Code in a Git-based version control system like Azure DevOps or GitHub.</span></span> <span data-ttu-id="f6c09-300">이러한 설정은 여러 배포에서 쉽게 동기화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-300">These settings cannot easily be synchronized across multiple deployments.</span></span> <span data-ttu-id="f6c09-301">따라서 외부에서 구성을 저장 및 적용하고 DevOps 파이프라인을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-301">Therefore we recommend storing and applying configuration from the outside, and using DevOps pipeline.</span></span>

<span data-ttu-id="f6c09-302">**애플리케이션**</span><span class="sxs-lookup"><span data-stu-id="f6c09-302">**Application**</span></span>

<span data-ttu-id="f6c09-303">애플리케이션은 Git 기반 리포지토리에 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-303">The application should be stored in a Git-based repository.</span></span> <span data-ttu-id="f6c09-304">새 배포, 애플리케이션 변경 또는 재해 복구가 있을 때마다 Azure Pipelines를 사용하여 쉽게 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-304">Whenever there's a new deployment, changes to the application, or disaster recovery, it can be easily deployed using Azure Pipelines.</span></span>

<span data-ttu-id="f6c09-305">**데이터**</span><span class="sxs-lookup"><span data-stu-id="f6c09-305">**Data**</span></span>

<span data-ttu-id="f6c09-306">데이터는 대부분의 애플리케이션 디자인에서 가장 중요한 고려 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-306">Data is the most important consideration in most application designs.</span></span> <span data-ttu-id="f6c09-307">애플리케이션 데이터는 애플리케이션의 서로 다른 인스턴스 간에 동기화 상태를 유지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-307">Application data must stay in sync between the different instances of the application.</span></span> <span data-ttu-id="f6c09-308">또한 중단이 발생하는 경우에 대비하여 데이터에 대한 백업 및 재해 복구 전략이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-308">Data also needs a backup and disaster recovery strategy if there's an outage.</span></span>

<span data-ttu-id="f6c09-309">이 디자인을 달성하는 것은 기술 선택에 따라 크게 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-309">Achieving this design depends heavily on technology choices.</span></span> <span data-ttu-id="f6c09-310">Azure Stack Hub에서 고가용성 방식으로 데이터베이스를 구현하기 위한 몇 가지 솔루션 예는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-310">Here are some solution examples for implementing a database in a highly available fashion on Azure Stack Hub:</span></span>

- [<span data-ttu-id="f6c09-311">Azure 및 Azure Stack Hub에 SQL Server 2016 가용성 그룹 배포</span><span class="sxs-lookup"><span data-stu-id="f6c09-311">Deploy a SQL Server 2016 availability group to Azure and Azure Stack Hub</span></span>](/azure-stack/hybrid/solution-deployment-guide-sql-ha)
- [<span data-ttu-id="f6c09-312">Azure 및 Azure Stack Hub에 고가용성 MongoDB 솔루션 배포</span><span class="sxs-lookup"><span data-stu-id="f6c09-312">Deploy a highly available MongoDB solution to Azure and Azure Stack Hub</span></span>](/azure-stack/hybrid/solution-deployment-guide-mongodb-ha)

<span data-ttu-id="f6c09-313">여러 위치에서 데이터를 사용하는 경우 고려해야 하는 사항은 가용성이 높고 복원력이 있는 솔루션에 대해 훨씬 더 복잡합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-313">Considerations when working with data across multiple locations is an even more complex consideration for a highly available and resilient solution.</span></span> <span data-ttu-id="f6c09-314">고려할 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-314">Consider:</span></span>

- <span data-ttu-id="f6c09-315">Azure Stack Hub 간의 대기 시간 및 네트워크 연결</span><span class="sxs-lookup"><span data-stu-id="f6c09-315">Latency and network connectivity between Azure Stack Hubs.</span></span>
- <span data-ttu-id="f6c09-316">서비스 및 권한에 대한 ID 가용성.</span><span class="sxs-lookup"><span data-stu-id="f6c09-316">Availability of identities for services and permissions.</span></span> <span data-ttu-id="f6c09-317">각 Azure Stack Hub 인스턴스는 외부 디렉터리와 통합됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-317">Each Azure Stack Hub instance integrates with an external directory.</span></span> <span data-ttu-id="f6c09-318">배포 중에 Azure AD(Azure Active Directory) 또는 ADFS(Active Directory Federation Services)를 사용하도록 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-318">During deployment, you choose to use either Azure Active Directory (Azure AD) or Active Directory Federation Services (ADFS).</span></span> <span data-ttu-id="f6c09-319">따라서 독립적인 여러 Azure Stack Hub 인스턴스와 상호 작용할 수 있는 단일 ID를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-319">As such, there's potential to use a single identity that can interact with multiple independent Azure Stack Hub instances.</span></span>

## <a name="business-continuity-and-disaster-recovery"></a><span data-ttu-id="f6c09-320">비즈니스 연속성 및 재해 복구</span><span class="sxs-lookup"><span data-stu-id="f6c09-320">Business continuity and disaster recovery</span></span>

<span data-ttu-id="f6c09-321">BCDR(비즈니스 연속성 및 재해 복구)은 Azure Stack Hub와 Azure 모두에서 중요한 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-321">Business continuity and disaster recovery (BCDR) is an important topic in both Azure Stack Hub and Azure.</span></span> <span data-ttu-id="f6c09-322">주요 차이점은 Azure Stack Hub에서는 운영자가 전체 BCDR 프로세스를 관리해야 한다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-322">The main difference is that in Azure Stack Hub, the operator must manage the whole BCDR process.</span></span> <span data-ttu-id="f6c09-323">Azure에서 BCDR의 일부는 Microsoft에서 자동으로 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-323">In Azure, parts of BCDR are automatically managed by Microsoft.</span></span>

<span data-ttu-id="f6c09-324">BCDR은 이전의 [데이터 및 스토리지 고려 사항](#data-and-storage-considerations) 섹션에서 언급한 동일한 영역에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-324">BCDR affects the same areas mentioned in the previous section [Data and storage considerations](#data-and-storage-considerations):</span></span>

- <span data-ttu-id="f6c09-325">인프라/구성</span><span class="sxs-lookup"><span data-stu-id="f6c09-325">Infrastructure / Configuration</span></span>
- <span data-ttu-id="f6c09-326">애플리케이션 가용성</span><span class="sxs-lookup"><span data-stu-id="f6c09-326">Application Availability</span></span>
- <span data-ttu-id="f6c09-327">애플리케이션 데이터</span><span class="sxs-lookup"><span data-stu-id="f6c09-327">Application Data</span></span>

<span data-ttu-id="f6c09-328">이전 섹션에서 언급한 대로 이러한 영역은 Azure Stack Hub 운영자가 담당하며 조직마다 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-328">And as mentioned in the previous section, these areas are the responsibility of the Azure Stack Hub operator and can vary between organizations.</span></span> <span data-ttu-id="f6c09-329">사용 가능한 도구 및 프로세스에 따라 BCDR을 계획합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-329">Plan BCDR according to your available tools and processes.</span></span>

<span data-ttu-id="f6c09-330">**인프라 및 구성**</span><span class="sxs-lookup"><span data-stu-id="f6c09-330">**Infrastructure and configuration**</span></span>

<span data-ttu-id="f6c09-331">이 섹션에서는 물리적 및 논리적 인프라와 Azure Stack Hub의 구성에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-331">This section covers the physical and logical infrastructure and the configuration of Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-332">관리자 및 테넌트 공간의 작업에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-332">It covers actions in the admin and the tenant spaces.</span></span>

<span data-ttu-id="f6c09-333">Azure Stack Hub 운영자(또는 관리자)는 Azure Stack Hub 인스턴스를 유지 관리해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-333">The Azure Stack Hub operator (or administrator) is responsible for maintenance of the Azure Stack Hub instances.</span></span> <span data-ttu-id="f6c09-334">이 문서의 범위를 벗어나는 네트워크, 스토리지, ID 및 기타 항목과 같은 구성 요소가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-334">Including components such as the network, storage, identity, and other topics that are outside the scope of this article.</span></span> <span data-ttu-id="f6c09-335">Azure Stack Hub 작업에 대해 자세히 알아보려면 다음 리소스를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-335">To learn more about the specifics of Azure Stack Hub operations, see the following resources:</span></span>

- [<span data-ttu-id="f6c09-336">Azure Stack Hub에서 Infrastructure Backup Service를 사용하여 데이터 복구</span><span class="sxs-lookup"><span data-stu-id="f6c09-336">Recover data in Azure Stack Hub with the Infrastructure Backup Service</span></span>](/azure-stack/operator/azure-stack-backup-infrastructure-backup)
- [<span data-ttu-id="f6c09-337">관리자 포털에서 백업을 Azure Stack Hub에 사용하도록 설정</span><span class="sxs-lookup"><span data-stu-id="f6c09-337">Enable backup for Azure Stack Hub from the administrator portal</span></span>](/azure-stack/operator/azure-stack-backup-enable-backup-console)
- [<span data-ttu-id="f6c09-338">치명적인 데이터 손실로부터 복구</span><span class="sxs-lookup"><span data-stu-id="f6c09-338">Recover from catastrophic data loss</span></span>](/azure-stack/operator/azure-stack-backup-recover-data)
- [<span data-ttu-id="f6c09-339">Infrastructure Backup Service 모범 사례</span><span class="sxs-lookup"><span data-stu-id="f6c09-339">Infrastructure Backup Service best practices</span></span>](/azure-stack/operator/azure-stack-backup-best-practices)

<span data-ttu-id="f6c09-340">Azure Stack Hub는 Kubernetes 애플리케이션을 배포할 플랫폼 및 패브릭입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-340">Azure Stack Hub is the platform and fabric on which Kubernetes applications will be deployed.</span></span> <span data-ttu-id="f6c09-341">Kubernetes 애플리케이션의 애플리케이션 소유자는 솔루션에 필요한 애플리케이션 인프라를 배포할 수 있는 액세스 권한이 부여된 Azure Stack Hub의 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-341">The application owner for the Kubernetes application will be a user of Azure Stack Hub, with access granted to deploy the application infrastructure needed for the solution.</span></span> <span data-ttu-id="f6c09-342">이 경우 애플리케이션 인프라는 AKS 엔진을 사용하여 배포된 Kubernetes 클러스터 및 주변 서비스를 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-342">Application infrastructure in this case means the Kubernetes cluster, deployed using AKS Engine, and the surrounding services.</span></span> <span data-ttu-id="f6c09-343">이러한 구성 요소는 Azure Stack Hub 제안으로 제한된 Azure Stack Hub에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-343">These components will be deployed into Azure Stack Hub, constrained by an Azure Stack Hub offer.</span></span> <span data-ttu-id="f6c09-344">전체 솔루션을 Kubernetes 애플리케이션 소유자가 수락한 제안에 배포하는 데 충분한 용량(Azure Stack Hub 할당량으로 표시됨)이 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-344">Make sure the offer accepted by the Kubernetes application owner has sufficient capacity (expressed in Azure Stack Hub quotas) to deploy the entire solution.</span></span> <span data-ttu-id="f6c09-345">이전 섹션에서 추천한 대로 Infrastructure-as-Code 및 배포 파이프라인(예: Azure DevOps Azure Pipelines)을 사용하여 애플리케이션 배포를 자동화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-345">As recommended in the previous section, the application deployment should be automated using Infrastructure-as-Code and deployment pipelines like Azure DevOps Azure Pipelines.</span></span>

<span data-ttu-id="f6c09-346">Azure Stack Hub 제안 및 할당량에 대한 자세한 내용은 [Azure Stack Hub 서비스, 계획, 제안 및 구독 개요](/azure-stack/operator/service-plan-offer-subscription-overview)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-346">For more information on Azure Stack Hub offers and quotas, see [Azure Stack Hub services, plans, offers, and subscriptions overview](/azure-stack/operator/service-plan-offer-subscription-overview)</span></span>

<span data-ttu-id="f6c09-347">출력을 포함하여 AKS 엔진 구성을 안전하게 저장하고 보관해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-347">It's important to securely save and store the AKS Engine configuration including its outputs.</span></span> <span data-ttu-id="f6c09-348">이러한 파일에는 Kubernetes 클러스터에 액세스하는 데 사용되는 기밀 정보가 포함되므로 관리자가 아닌 사용자에게 공개되지 않도록 보호해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-348">These files contain confidential information used to access the Kubernetes cluster, so it must be protected from being exposed to non-administrators.</span></span>

<span data-ttu-id="f6c09-349">**애플리케이션 가용성**</span><span class="sxs-lookup"><span data-stu-id="f6c09-349">**Application availability**</span></span>

<span data-ttu-id="f6c09-350">애플리케이션은 배포된 인스턴스의 백업을 사용하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-350">The application shouldn't rely on backups of a deployed instance.</span></span> <span data-ttu-id="f6c09-351">표준 사례로 Infrastructure-as-Code 패턴을 따라 애플리케이션을 완전히 다시 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-351">As a standard practice, redeploy the application completely following Infrastructure-as-Code patterns.</span></span> <span data-ttu-id="f6c09-352">예를 들어 Azure DevOps Azure Pipelines를 사용하여 다시 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-352">For example, redeploy using Azure DevOps Azure Pipelines.</span></span> <span data-ttu-id="f6c09-353">BCDR 절차에서는 애플리케이션을 동일하거나 다른 Kubernetes 클러스터에 다시 배포해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-353">The BCDR procedure should involve the redeployment of the application to the same or another Kubernetes cluster.</span></span>

<span data-ttu-id="f6c09-354">**애플리케이션 데이터**</span><span class="sxs-lookup"><span data-stu-id="f6c09-354">**Application data**</span></span>

<span data-ttu-id="f6c09-355">애플리케이션 데이터는 데이터 손실을 최소화하는 데 중요한 부분입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-355">Application data is the critical part to minimize data loss.</span></span> <span data-ttu-id="f6c09-356">이전 섹션에서는 둘 이상의 애플리케이션 인스턴스 간에 데이터를 복제하고 동기화하는 기술에 대해 설명했습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-356">In the previous section, techniques to replicate and synchronize data between two (or more) instances of the application were described.</span></span> <span data-ttu-id="f6c09-357">데이터를 저장하는 데 사용되는 데이터베이스 인프라(MySQL, MongoDB, MSSQL 또는 기타)에 따라 선택할 수 있는 다양한 데이터베이스 가용성 및 백업 기술이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-357">Depending on the database infrastructure (MySQL, MongoDB, MSSQL or others) used to store the data, there will be different database availability and backup techniques available to choose from.</span></span>

<span data-ttu-id="f6c09-358">무결성을 달성하는 데 추천되는 방법은 다음 중 하나를 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-358">The recommended ways to achieve integrity are to use either:</span></span>
- <span data-ttu-id="f6c09-359">특정 데이터베이스에 대한 기본 백업 솔루션.</span><span class="sxs-lookup"><span data-stu-id="f6c09-359">A native backup solution for the specific database.</span></span>
- <span data-ttu-id="f6c09-360">애플리케이션에서 사용하는 데이터베이스 유형의 백업 및 복구를 공식적으로 지원하는 백업 솔루션.</span><span class="sxs-lookup"><span data-stu-id="f6c09-360">A backup solution that officially supports backup and recovery of the database type used by your application.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f6c09-361">애플리케이션 데이터가 있는 동일한 Azure Stack Hub 인스턴스에 백업 데이터를 저장하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-361">Do not store your backup data on the same Azure Stack Hub instance where your application data resides.</span></span> <span data-ttu-id="f6c09-362">Azure Stack Hub 인스턴스가 완전히 중단되면 백업도 손상됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-362">A complete outage of the Azure Stack Hub instance would also compromise your backups.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="f6c09-363">가용성 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-363">Availability considerations</span></span>

<span data-ttu-id="f6c09-364">AKS 엔진을 통해 배포된 Azure Stack Hub의 Kubernetes는 관리되는 서비스가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-364">Kubernetes on Azure Stack Hub deployed via AKS Engine isn't a managed service.</span></span> <span data-ttu-id="f6c09-365">이는 Azure IaaS(Infrastructure-as-a-Service)를 사용하여 자동화된 Kubernetes 클러스터 배포 및 구성입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-365">It's an automated deployment and configuration of a Kubernetes cluster using Azure Infrastructure-as-a-Service (IaaS).</span></span> <span data-ttu-id="f6c09-366">따라서 기본 인프라와 동일한 가용성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-366">As such, it provides the same availability as the underlying infrastructure.</span></span>

<span data-ttu-id="f6c09-367">Azure Stack Hub 인프라는 이미 오류에 대한 복원력을 갖추고 있으며, Availability Sets와 같은 기능을 제공하여 구성 요소를 여러 [장애 및 업데이트 도메인](/azure-stack/user/azure-stack-vm-considerations#high-availability)에 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-367">Azure Stack Hub infrastructure is already resilient to failures, and provides capabilities like Availability Sets to distribute components across multiple [fault and update domains](/azure-stack/user/azure-stack-vm-considerations#high-availability).</span></span> <span data-ttu-id="f6c09-368">그러나 하드웨어 오류가 있는 경우에도 기본 기술(장애 조치(failover) 클러스터링)로 인해 영향을 받는 물리적 서버의 VM에 대해 여전히 약간의 가동 중지 시간이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-368">But the underlying technology (failover clustering) still incurs some downtime for VMs on an impacted physical server, if there's a hardware failure.</span></span>

<span data-ttu-id="f6c09-369">프로덕션 Kubernetes 클러스터와 워크로드를 둘 이상의 클러스터에 배포하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-369">It's a good practice to deploy your production Kubernetes cluster as well as the workload to two (or more) clusters.</span></span> <span data-ttu-id="f6c09-370">이러한 클러스터는 서로 다른 위치 또는 데이터 센터에서 호스팅되어야 하며, Azure Traffic Manager와 같은 기술을 사용하여 클러스터 응답 시간 또는 지리에 따라 사용자를 라우팅해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-370">These clusters should be hosted in different locations or datacenters, and use technologies like Azure Traffic Manager to route users based on cluster response time or based on geography.</span></span>

![Traffic Manager를 사용하여 트래픽 흐름 제어](media/pattern-highly-available-kubernetes/aks-azure-traffic-manager.png)

<span data-ttu-id="f6c09-372">단일 Kubernetes 클러스터가 있는 고객은 일반적으로 지정된 애플리케이션의 서비스 IP 또는 DNS 이름에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-372">Customers who have a single Kubernetes cluster typically connect to the service IP or DNS name of a given application.</span></span> <span data-ttu-id="f6c09-373">다중 클러스터 배포에서는 고객이 각 Kubernetes 클러스터의 서비스/수신을 가리키는 Traffic Manager DNS 이름에 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-373">In a multi-cluster deployment, customers should connect to a Traffic Manager DNS name that points to the services/ingress on each Kubernetes cluster.</span></span>

![Traffic Manager를 사용하여 내부 클러스터로 라우팅](media/pattern-highly-available-kubernetes/aks-azure-traffic-manager-on-premises.png)

> [!NOTE]
> <span data-ttu-id="f6c09-375">이 패턴은 [Azure에서 (관리되는) AKS 클러스터에 대한 모범 사례](/azure/aks/operator-best-practices-multi-region#plan-for-multiregion-deployment)이기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-375">This pattern is also a [best practice for (managed) AKS clusters in Azure](/azure/aks/operator-best-practices-multi-region#plan-for-multiregion-deployment).</span></span>

<span data-ttu-id="f6c09-376">AKS 엔진을 통해 배포되는 Kubernetes 클러스터 자체는 세 개 이상의 마스터 노드와 두 개의 작업자 노드로 구성되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-376">The Kubernetes cluster itself, deployed via AKS Engine, should consist of at least three master nodes and two worker nodes.</span></span>

## <a name="identity-and-security-considerations"></a><span data-ttu-id="f6c09-377">ID 및 보안 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-377">Identity and security considerations</span></span>

<span data-ttu-id="f6c09-378">ID 및 보안은 중요한 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-378">Identity and security are important topics.</span></span> <span data-ttu-id="f6c09-379">특히 솔루션이 독립적인 Azure Stack Hub 인스턴스에 걸쳐 있는 경우 이에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-379">Especially when the solution spans independent Azure Stack Hub instances.</span></span> <span data-ttu-id="f6c09-380">Kubernetes 및 Azure(Azure Stack Hub 포함)에는 모두 RBAC(역할 기반 액세스 제어)에 대한 고유한 메커니즘이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-380">Kubernetes and Azure (including Azure Stack Hub) both have distinct mechanisms for role-based access control (RBAC):</span></span>

- <span data-ttu-id="f6c09-381">Azure RBAC는 새 Azure 리소스를 만드는 기능을 포함하여 Azure(및 Azure Stack Hub)의 리소스에 대한 액세스를 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-381">Azure RBAC controls access to resources in Azure (and Azure Stack Hub), including the ability to create new Azure resources.</span></span> <span data-ttu-id="f6c09-382">사용자, 그룹 또는 서비스 주체에 권한을 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-382">Permissions can be assigned to users, groups, or service principals.</span></span> <span data-ttu-id="f6c09-383">(서비스 주체는 애플리케이션에서 사용하는 보안 ID입니다.)</span><span class="sxs-lookup"><span data-stu-id="f6c09-383">(A service principal is a security identity used by applications.)</span></span>
- <span data-ttu-id="f6c09-384">Kubernetes RBAC는 Kubernetes API 권한을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-384">Kubernetes RBAC controls permissions to the Kubernetes API.</span></span> <span data-ttu-id="f6c09-385">예를 들어 Pod 만들기 및 Pod 나열은 RBAC를 통해 사용자에게 권한을 부여(또는 거부)할 수 있는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-385">For example, creating pods and listing pods are actions that can be authorized (or denied) to a user through RBAC.</span></span> <span data-ttu-id="f6c09-386">사용자에게 Kubernetes 권한을 할당하려면 역할 및 역할 바인딩을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-386">To assign Kubernetes permissions to users, you create roles and role bindings.</span></span>

<span data-ttu-id="f6c09-387">**Azure Stack Hub ID 및 RBAC**</span><span class="sxs-lookup"><span data-stu-id="f6c09-387">**Azure Stack Hub identity and RBAC**</span></span>

<span data-ttu-id="f6c09-388">Azure Stack Hub는 ID 공급자에 대해 두 가지 선택 항목을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-388">Azure Stack Hub provides two identity provider choices.</span></span> <span data-ttu-id="f6c09-389">사용하는 공급자는 환경 및 연결되거나 연결되지 않은 환경에서 실행되는지 여부에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-389">The provider you use depends on the environment and whether running in a connected or disconnected environment:</span></span>

- <span data-ttu-id="f6c09-390">Azure AD - 연결된 환경에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-390">Azure AD - can only be used in a connected environment.</span></span>
- <span data-ttu-id="f6c09-391">기존 Active Directory 포리스트에 대한 ADFS - 연결되거나 연결되지 않은 환경 모두에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-391">ADFS to a traditional Active Directory forest - can be used in both a connected or disconnected environment.</span></span>

<span data-ttu-id="f6c09-392">ID 공급자는 리소스 액세스를 위한 인증 및 권한 부여를 포함하여 사용자와 그룹을 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-392">The identity provider manages users and groups, including authentication and authorization for accessing resources.</span></span> <span data-ttu-id="f6c09-393">구독, 리소스 그룹 및 개별 리소스(예: VM 또는 부하 분산 장치)와 같은 Azure Stack Hub 리소스에 대한 액세스 권한을 부여할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-393">Access can be granted to Azure Stack Hub resources like subscriptions, resource groups, and individual resources like VMs or load balancers.</span></span> <span data-ttu-id="f6c09-394">일관된 액세스 모델을 사용하려면 모든 Azure Stack Hub에 대해 동일한 그룹(직접 또는 중첩)을 사용하는 것을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-394">To have a consistent access model, you should consider using the same groups (either direct or nested) for all Azure Stack Hubs.</span></span> <span data-ttu-id="f6c09-395">구성 예는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-395">Here's a configuration example:</span></span>

![Azure Stack Hub를 사용하여 중첩된 AAD 그룹](media/pattern-highly-available-kubernetes/azure-stack-azure-ad-nested-groups.png)

<span data-ttu-id="f6c09-397">이 예에는 특정 용도를 위한 전용 그룹(AAD 또는 ADFS 사용)이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-397">The example contains a dedicated group (using AAD or ADFS) for a specific purpose.</span></span> <span data-ttu-id="f6c09-398">예를 들어 특정 Azure Stack Hub 인스턴스에서 Kubernetes 클러스터 인프라를 포함하는 리소스 그룹에 대한 기여자(여기서는 "Seattle K8s 클러스터 기여자") 권한을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-398">For example, to provide Contributor permissions for the Resource Group that contains our Kubernetes cluster infrastructure on a specific Azure Stack Hub instance (here "Seattle K8s Cluster Contributor").</span></span> <span data-ttu-id="f6c09-399">그런 다음, 이러한 그룹은 각 Azure Stack Hub에 대한 "하위 그룹"을 포함하는 전체 그룹에 중첩됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-399">These groups are then nested into an overall group that contains the "subgroups" for each Azure Stack Hub.</span></span>

<span data-ttu-id="f6c09-400">이제 샘플 사용자에게는 전체 Kubernetes 인프라 리소스 세트가 포함된 두 리소스 그룹에 대한 "기여자" 권한이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-400">Our sample user will now have "Contributor" permissions to both Resources Groups that contain the entire set of Kubernetes infrastructure resources.</span></span> <span data-ttu-id="f6c09-401">인스턴스에서 동일한 ID 공급자를 공유하므로 사용자는 두 Azure Stack Hub 인스턴스 모두의 리소스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-401">The user will have access to resources on both Azure Stack Hub instances, because the instances share the same identity provider.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f6c09-402">이러한 권한은 Azure Stack Hub 및 이를 기반으로 하여 배포된 리소스 중 일부에만 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-402">These permissions affect only Azure Stack Hub and some of the resources deployed on top of it.</span></span> <span data-ttu-id="f6c09-403">이 액세스 수준에 있는 사용자는 많은 피해를 줄 수 있지만, Kubernetes 배포에 대한 추가 액세스 권한이 있어야 Kubernetes IaaS VM 및 Kubernetes API에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-403">A user who has this level of access can do a lot of harm, but cannot access the Kubernetes IaaS VMs nor the Kubernetes API without additional access to the Kubernetes deployment.</span></span>

<span data-ttu-id="f6c09-404">**Kubernetes ID 및 RBAC**</span><span class="sxs-lookup"><span data-stu-id="f6c09-404">**Kubernetes identity and RBAC**</span></span>

<span data-ttu-id="f6c09-405">Kubernetes 클러스터는 기본적으로 기본 Azure Stack Hub와 동일한 ID 공급자를 사용하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-405">A Kubernetes cluster, by default, doesn't use the same Identity Provider as the underlaying Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-406">Kubernetes 클러스터, 마스터 및 작업자 노드를 호스팅하는 VM은 클러스터 배포 중에 지정된 SSH 키를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-406">The VMs hosting the Kubernetes cluster, the master, and worker nodes, use the SSH Key that is specified during the deployment of the cluster.</span></span> <span data-ttu-id="f6c09-407">이 SSH 키는 SSH를 사용하여 이러한 노드에 연결하는 데 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-407">This SSH key is required to connect to these nodes using SSH.</span></span>

<span data-ttu-id="f6c09-408">또한 Kubernetes API(예: `kubectl`을 사용하여 액세스)는 서비스 계정(기본 "클러스터 관리자" 서비스 계정 포함)으로도 보호됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-408">The Kubernetes API (for example, accessed by using `kubectl`) is also protected by service accounts including a default "cluster admin" service account.</span></span> <span data-ttu-id="f6c09-409">이 서비스 계정에 대한 자격 증명은 처음에 Kubernetes 마스터 노드의 `.kube/config` 파일에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-409">The credentials for this service account are initially stored in the `.kube/config` file on your Kubernetes master nodes.</span></span>

<span data-ttu-id="f6c09-410">**비밀 관리 및 애플리케이션 자격 증명**</span><span class="sxs-lookup"><span data-stu-id="f6c09-410">**Secrets management and application credentials**</span></span>

<span data-ttu-id="f6c09-411">연결 문자열 또는 데이터베이스 자격 증명과 같은 비밀을 저장하려면 다음과 같은 몇 가지 선택 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-411">To store secrets like connection strings or database credentials there are several choices, including:</span></span>

- <span data-ttu-id="f6c09-412">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="f6c09-412">Azure Key Vault</span></span>
- <span data-ttu-id="f6c09-413">Kubernetes 비밀</span><span class="sxs-lookup"><span data-stu-id="f6c09-413">Kubernetes Secrets</span></span>
- <span data-ttu-id="f6c09-414">HashiCorp Vault와 같은 타사 솔루션(Kubernetes에서 실행)</span><span class="sxs-lookup"><span data-stu-id="f6c09-414">3rd-Party solutions like HashiCorp Vault (running on Kubernetes)</span></span>

<span data-ttu-id="f6c09-415">비밀 또는 자격 증명을 일반 텍스트로 구성 파일, 애플리케이션 코드 또는 스크립트 내에 저장하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-415">Do not store secrets or credentials in plaintext in your configuration files, application code, or within scripts.</span></span> <span data-ttu-id="f6c09-416">버전 제어 시스템에도 저장하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-416">And do not store them in a version control system.</span></span> <span data-ttu-id="f6c09-417">대신 배포 자동화는 필요에 따라 비밀을 검색해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-417">Instead, the deployment automation should retrieve the secrets as needed.</span></span>

## <a name="patch-and-update"></a><span data-ttu-id="f6c09-418">패치 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="f6c09-418">Patch and update</span></span>

<span data-ttu-id="f6c09-419">Azure Kubernetes Service의 **PNU(패치 및 업데이트)** 프로세스는 부분적으로 자동화됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-419">The **Patch and Update (PNU)** process in Azure Kubernetes Service is partially automated.</span></span> <span data-ttu-id="f6c09-420">Kubernetes 버전 업그레이드는 수동으로 트리거되지만, 보안 업데이트는 자동으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-420">Kubernetes version upgrades are triggered manually, while security updates are applied automatically.</span></span> <span data-ttu-id="f6c09-421">이러한 업데이트에는 OS 보안 수정 또는 커널 업데이트가 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-421">These updates can include OS security fixes or kernel updates.</span></span> <span data-ttu-id="f6c09-422">AKS는 업데이트 프로세스를 완료하기 위해 이러한 Linux 노드를 자동으로 다시 부팅하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-422">AKS doesn't automatically reboot these Linux nodes to complete the update process.</span></span> 

<span data-ttu-id="f6c09-423">Azure Stack Hub에서 AKS 엔진을 사용하여 배포된 Kubernetes 클러스터에 대한 PNU 프로세스는 관리되지 않으며 클러스터 운영자가 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-423">The PNU process for a Kubernetes cluster deployed using AKS Engine on Azure Stack Hub is unmanaged, and is the responsibility of the cluster operator.</span></span> 

<span data-ttu-id="f6c09-424">AKS 엔진에서 지원하는 가장 중요한 두 가지 작업은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-424">AKS Engine helps with the two most important tasks:</span></span>

- [<span data-ttu-id="f6c09-425">최신 Kubernetes 및 기본 OS 이미지 버전으로 업그레이드</span><span class="sxs-lookup"><span data-stu-id="f6c09-425">Upgrade to a newer Kubernetes and base OS image version</span></span>](/azure-stack/user/azure-stack-kubernetes-aks-engine-upgrade#steps-to-upgrade-to-a-newer-kubernetes-version)
- [<span data-ttu-id="f6c09-426">기본 OS 이미지만 업그레이드</span><span class="sxs-lookup"><span data-stu-id="f6c09-426">Upgrade the base OS image only</span></span>](/azure-stack/user/azure-stack-kubernetes-aks-engine-upgrade#steps-to-only-upgrade-the-os-image)

<span data-ttu-id="f6c09-427">최신 기본 OS 이미지에는 최신 OS 보안 수정 및 커널 업데이트가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-427">Newer base OS images contain the latest OS security fixes and kernel updates.</span></span> 

<span data-ttu-id="f6c09-428">[무인 업그레이드](https://wiki.debian.org/UnattendedUpgrades) 메커니즘은 Azure Stack Hub Marketplace에서 새 기본 OS 이미지 버전을 사용할 수 있기 전에 릴리스된 보안 업데이트를 자동으로 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-428">The [Unattended Upgrade](https://wiki.debian.org/UnattendedUpgrades) mechanism automatically installs security updates that are released before a new base OS image version is available in the Azure Stack Hub Marketplace.</span></span> <span data-ttu-id="f6c09-429">무인 업그레이드는 기본적으로 사용하도록 설정되며, 보안 업데이트를 자동으로 설치하지만 Kubernetes 클러스터 노드를 다시 부팅하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-429">Unattended upgrade is enabled by default and installs security updates automatically, but does not reboot the Kubernetes cluster nodes.</span></span> <span data-ttu-id="f6c09-430">노드를 다시 부팅하는 것은 오픈 소스 [kured(**K** Ubernetes **RE** boot **D** aemon)](/azure/aks/node-updates-kured)를 사용하여 자동화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-430">Rebooting the nodes can be automated using the open-source [**K** Ubernetes **RE** boot **D** aemon (kured))](/azure/aks/node-updates-kured).</span></span> <span data-ttu-id="f6c09-431">kured는 다시 부팅해야 하는 Linux 노드를 감시한 다음, 실행되는 Pod 및 노드 다시 부팅 프로세스의 다시 예약을 자동으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-431">Kured watches for Linux nodes that require a reboot, then automatically handle the rescheduling of running pods and node reboot process.</span></span>

## <a name="deployment-cicd-considerations"></a><span data-ttu-id="f6c09-432">배포(CI/CD) 고려 사항</span><span class="sxs-lookup"><span data-stu-id="f6c09-432">Deployment (CI/CD) considerations</span></span>

<span data-ttu-id="f6c09-433">Azure 및 Azure Stack Hub는 동일한 Azure Resource Manager REST API를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-433">Azure and Azure Stack Hub expose the same Azure Resource Manager REST APIs.</span></span> <span data-ttu-id="f6c09-434">이러한 API는 다른 Azure 클라우드(Azure, Azure 중국 21Vianet, Azure Government)와 동일하게 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-434">These APIs are addressed like any other Azure cloud (Azure, Azure China 21Vianet, Azure Government).</span></span> <span data-ttu-id="f6c09-435">API 버전은 클라우드 간에 다를 수 있으며, Azure Stack Hub는 서비스의 하위 집합만 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-435">There may be differences in API versions between clouds, and Azure Stack Hub provides only a subset of services.</span></span> <span data-ttu-id="f6c09-436">관리 엔드포인트 URI는 클라우드 및 Azure Stack Hub 인스턴스마다 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-436">The management endpoint URI is also different for each cloud, and each instance of Azure Stack Hub.</span></span>

<span data-ttu-id="f6c09-437">언급한 미묘한 차이점 외에도 Azure Resource Manager REST API는 Azure 및 Azure Stack Hub 모두와 상호 작용할 수 있는 일관된 방법을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-437">Aside from the subtle differences mentioned, Azure Resource Manager REST APIs provide a consistent way to interact with both Azure and Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-438">여기서는 다른 Azure 클라우드에서 사용하는 것과 동일한 도구 세트를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-438">The same set of tools can be used here as would be used with any other Azure cloud.</span></span> <span data-ttu-id="f6c09-439">Azure DevOps, Jenkins와 같은 도구 또는 PowerShell을 사용하여 서비스를 Azure Stack Hub에 배포하고 오케스트레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-439">You can use Azure DevOps, tools like Jenkins, or PowerShell, to deploy and orchestrate services to Azure Stack Hub.</span></span>

<span data-ttu-id="f6c09-440">**고려 사항**</span><span class="sxs-lookup"><span data-stu-id="f6c09-440">**Considerations**</span></span>

<span data-ttu-id="f6c09-441">Azure Stack Hub 배포와 관련된 주요 차이점 중 하나는 인터넷 접근성에 대한 질문입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-441">One of the major differences when it comes to Azure Stack Hub deployments is the question of Internet accessibility.</span></span> <span data-ttu-id="f6c09-442">인터넷 접근성은 CI/CD 작업에 대해 Microsoft 호스팅 또는 자체 호스팅 빌드 에이전트를 선택할지 여부를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-442">Internet accessibility determines whether to select a Microsoft-hosted or a self-hosted build agent for your CI/CD jobs.</span></span>

<span data-ttu-id="f6c09-443">자체 호스팅 에이전트는 Azure Stack Hub를 기반으로 하여 실행되거나(IaaS VM으로) Azure Stack Hub에 액세스할 수 있는 네트워크 서브넷에서 실행될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-443">A self-hosted agent can run on top of Azure Stack Hub (as an IaaS VM) or in a network subnet that can access Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-444">차이점에 대한 자세한 내용은 [Azure Pipelines 에이전트](/azure/devops/pipelines/agents/agents)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-444">Go to [Azure Pipelines agents](/azure/devops/pipelines/agents/agents) to learn more about the differences.</span></span>

<span data-ttu-id="f6c09-445">다음 이미지는 자체 호스팅 또는 Microsoft 호스팅 빌드 에이전트가 필요한지 결정하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-445">The following image helps you to decide if you need a self-hosted or a Microsoft-hosted build agent:</span></span>

![자체 호스팅 빌드 에이전트 예 또는 아니요](media/pattern-highly-available-kubernetes/aks-on-stack-self-hosted-build-agents-yes-or-no.png)

- <span data-ttu-id="f6c09-447">인터넷을 통해 Azure Stack Hub 관리 엔드포인트에 액세스할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="f6c09-447">Are the Azure Stack Hub management endpoints accessible via Internet?</span></span>
  - <span data-ttu-id="f6c09-448">예: Microsoft 호스팅 에이전트에서 Azure Pipelines를 사용하여 Azure Stack Hub에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-448">Yes: We can use Azure Pipelines with Microsoft-hosted agents to connect to Azure Stack Hub.</span></span>
  - <span data-ttu-id="f6c09-449">아니요: Azure Stack Hub의 관리 엔드포인트에 연결할 수 있는 자체 호스팅 에이전트가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-449">No: We need self-hosted agents that can connect to Azure Stack Hub's management endpoints.</span></span>
- <span data-ttu-id="f6c09-450">인터넷을 통해 Kubernetes 클러스터에 액세스할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="f6c09-450">Is our Kubernetes cluster accessible via the Internet?</span></span>
  - <span data-ttu-id="f6c09-451">예: Microsoft 호스팅 에이전트에서 Azure Pipelines를 사용하여 Kubernetes API 엔드포인트와 직접 상호 작용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-451">Yes: We can use Azure Pipelines with Microsoft-hosted agents to interact directly with Kubernetes API endpoint.</span></span>
  - <span data-ttu-id="f6c09-452">아니요: Kubernetes 클러스터 API 엔드포인트에 연결할 수 있는 자체 호스팅 에이전트가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-452">No: We need self-hosted Agents that can connect to the Kubernetes cluster API endpoint.</span></span>

<span data-ttu-id="f6c09-453">인터넷을 통해 Azure Stack Hub 관리 엔드포인트 및 Kubernetes API에 액세스할 수 있는 시나리오에서 배포는 Microsoft 호스팅 에이전트를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-453">In scenarios where the Azure Stack Hub management endpoints and Kubernetes API are accessible via the internet, the deployment can use a Microsoft-hosted agent.</span></span> <span data-ttu-id="f6c09-454">이 배포로 인해 다음과 같은 애플리케이션 아키텍처가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-454">This deployment will result in an application architecture as follows:</span></span>

<span data-ttu-id="f6c09-455">[![퍼블릭 아키텍처 개요](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="f6c09-455">[![Public architecture overview](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png#lightbox)</span></span>

<span data-ttu-id="f6c09-456">Azure Resource Manager 엔드포인트, Kubernetes API 또는 둘 다 인터넷을 통해 직접 액세스할 수 없는 경우 자체 호스팅 빌드 에이전트를 활용하여 파이프라인 단계를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-456">If the Azure Resource Manager endpoints, Kubernetes API, or both aren't directly accessible via the Internet, we can leverage a self-hosted build agent to run the pipeline steps.</span></span> <span data-ttu-id="f6c09-457">이 디자인에서는 더 적은 연결이 필요하며, Azure Resource Manager 엔드포인트 및 Kubernetes API에 대한 온-프레미스 네트워크 연결만으로 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-457">This design needs less connectivity, and can be deployed with only on-premises network connectivity to Azure Resource Manager endpoints and the Kubernetes API:</span></span>

<span data-ttu-id="f6c09-458">[![온-프레미스 아키텍처 개요](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="f6c09-458">[![On-prem architecture overview](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png#lightbox)</span></span>

> [!NOTE]
> <span data-ttu-id="f6c09-459">**연결되지 않은 시나리오는 어떻게 되나요?**</span><span class="sxs-lookup"><span data-stu-id="f6c09-459">**What about disconnected scenarios?**</span></span> <span data-ttu-id="f6c09-460">Azure Stack Hub 또는 Kubernetes 중 하나 또는 둘 다에 인터넷 연결 관리 엔드포인트가 없는 시나리오에서도 Azure DevOps를 배포에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-460">In scenarios where either Azure Stack Hub or Kubernetes or both of them do not have internet-facing management endpoints, it is still possible to use Azure DevOps for your deployments.</span></span> <span data-ttu-id="f6c09-461">온-프레미스에서 자체 호스팅 에이전트 풀(온-프레미스 또는 Azure Stack Hub 자체에서 실행되는 DevOps 에이전트) 또는 완전한 자체 호스팅 Azure DevOps 서버를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-461">You can either use a self-hosted Agent Pool (which is a DevOps Agent running on-premises or on Azure Stack Hub itself) or a completly self-hosted Azure DevOps Server on-premises.</span></span> <span data-ttu-id="f6c09-462">자체 호스팅 에이전트에는 아웃바운드 HTTPS(TCP/443) 인터넷 연결만 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-462">The self-hosted agent needs only outbound HTTPS (TCP/443) Internet connectivity.</span></span>

<span data-ttu-id="f6c09-463">이 패턴에서는 각 Azure Stack Hub 인스턴스에서 Kubernetes 클러스터(AKS 엔진을 통해 배포 및 오케스트레이션됨)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-463">The pattern can use a Kubernetes cluster (deployed and orchestrated with AKS engine) on each Azure Stack Hub instance.</span></span> <span data-ttu-id="f6c09-464">여기에는 프런트 엔드, 중간 계층, 백 엔드 서비스(예: MongoDB) 및 nginx 기반 수신 컨트롤러로 구성된 애플리케이션이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-464">It includes an application consisting of a frontend, a mid-tier, backend services (for example MongoDB), and an nginx-based Ingress Controller.</span></span> <span data-ttu-id="f6c09-465">K8s 클러스터에서 호스팅되는 데이터베이스를 사용하는 대신 "외부 데이터 저장소"를 활용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-465">Instead of using a database hosted on the K8s cluster, you can leverage "external data stores".</span></span> <span data-ttu-id="f6c09-466">데이터베이스 옵션에는 MySQL, SQL Server 또는 Azure Stack Hub 외부 또는 IaaS에서 호스팅되는 모든 종류의 데이터베이스가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-466">Database options include MySQL, SQL Server, or any kind of database hosted outside of Azure Stack Hub or in IaaS.</span></span> <span data-ttu-id="f6c09-467">이와 같은 구성은 여기서 다루지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-467">Configurations like this aren't in scope here.</span></span>

## <a name="partner-solutions"></a><span data-ttu-id="f6c09-468">파트너 솔루션</span><span class="sxs-lookup"><span data-stu-id="f6c09-468">Partner solutions</span></span>

<span data-ttu-id="f6c09-469">Azure Stack Hub의 기능을 확장할 수 있는 Microsoft 파트너 솔루션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-469">There are Microsoft Partner solutions that can extend the capabilities of Azure Stack Hub.</span></span> <span data-ttu-id="f6c09-470">이러한 솔루션은 Kubernetes 클러스터에서 실행되는 애플리케이션을 배포하는 데 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-470">These solutions have been found useful in deployments of applications running on Kubernetes clusters.</span></span>  

## <a name="storage-and-data-solutions"></a><span data-ttu-id="f6c09-471">스토리지 및 데이터 솔루션</span><span class="sxs-lookup"><span data-stu-id="f6c09-471">Storage and data solutions</span></span>

<span data-ttu-id="f6c09-472">[데이터 및 스토리지 고려 사항](#data-and-storage-considerations)에서 설명한 대로 Azure Stack Hub에는 현재 여러 인스턴스에서 스토리지를 복제하는 기본 솔루션이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-472">As described in [Data and storage considerations](#data-and-storage-considerations), Azure Stack Hub currently doesn't have a native solution to replicate storage across multiple instances.</span></span> <span data-ttu-id="f6c09-473">Azure와 달리 여러 지역에서 스토리지를 복제하는 기능이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-473">Unlike Azure, the capability of replicating storage across multiple regions does not exist.</span></span> <span data-ttu-id="f6c09-474">Azure Stack Hub에서 각 인스턴스는 고유한 클라우드입니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-474">In Azure Stack Hub, each instance is its own distinct cloud.</span></span> <span data-ttu-id="f6c09-475">그러나 Azure Stack Hub 및 Azure에서 스토리지 복제를 사용하도록 설정하는 솔루션은 Microsoft 파트너에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-475">However, solutions are available from Microsoft Partners that enable storage replication across Azure Stack Hubs and Azure.</span></span> 

<span data-ttu-id="f6c09-476">**SCALITY**</span><span class="sxs-lookup"><span data-stu-id="f6c09-476">**SCALITY**</span></span>

<span data-ttu-id="f6c09-477">[Scality](https://www.scality.com/)는 2009년부터 디지털 비즈니스를 제공한 웹 규모의 스토리지를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-477">[Scality](https://www.scality.com/) delivers web-scale storage that has powered digital businesses since 2009.</span></span> <span data-ttu-id="f6c09-478">소프트웨어 정의 스토리지인 Scality RING은 상용 x86 서버를 페타바이트 규모의 모든 형식의 데이터(파일 및 개체)에 대한 무제한 스토리지 풀로 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-478">The Scality RING, our software-defined storage, turns commodity x86 servers into an unlimited storage pool for any type of data –file and object– at petabyte scale.</span></span>

<span data-ttu-id="f6c09-479">**CLOUDIAN**</span><span class="sxs-lookup"><span data-stu-id="f6c09-479">**CLOUDIAN**</span></span>

<span data-ttu-id="f6c09-480">[Cloudian](https://www.cloudian.com/)은 엔터프라이즈 스토리지를 확장 가능한 무제한 스토리지로 간소화하여 대규모 데이터 세트를 관리하기 쉬운 단일 환경으로 통합합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-480">[Cloudian](https://www.cloudian.com/) simplifies enterprise storage with limitless scalable storage that consolidates massive data sets to a single, easily managed environment.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f6c09-481">다음 단계</span><span class="sxs-lookup"><span data-stu-id="f6c09-481">Next steps</span></span>

<span data-ttu-id="f6c09-482">이 문서에서 소개하는 개념에 대해 자세히 알아보려면 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-482">To learn more about concepts introduced in this article:</span></span>

- <span data-ttu-id="f6c09-483">Azure Stack Hub의 [클라우드 간 크기 조정](pattern-cross-cloud-scale.md) 및 [지리적으로 분산되는 앱 패턴](pattern-geo-distributed.md)</span><span class="sxs-lookup"><span data-stu-id="f6c09-483">[Cross-cloud scaling](pattern-cross-cloud-scale.md) and [Geo-distributed app patterns](pattern-geo-distributed.md) in Azure Stack Hub.</span></span>
- <span data-ttu-id="f6c09-484">[AKS(Azure Kubernetes Service)의 마이크로서비스 아키텍처](/azure/architecture/reference-architectures/microservices/aks)</span><span class="sxs-lookup"><span data-stu-id="f6c09-484">[Microservices architecture on Azure Kubernetes Service (AKS)](/azure/architecture/reference-architectures/microservices/aks).</span></span>

<span data-ttu-id="f6c09-485">솔루션 예를 테스트할 준비가 되면 [고가용성 Kubernetes 클러스터 배포 가이드](solution-deployment-guide-highly-available-kubernetes.md)로 계속 진행하세요.</span><span class="sxs-lookup"><span data-stu-id="f6c09-485">When you're ready to test the solution example, continue with the [High availability Kubernetes cluster deployment guide](solution-deployment-guide-highly-available-kubernetes.md).</span></span> <span data-ttu-id="f6c09-486">배포 가이드에서는 해당 구성 요소를 배포 및 테스트하는 방법에 대한 단계별 지침을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f6c09-486">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>